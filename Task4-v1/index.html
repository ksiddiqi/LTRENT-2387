<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="CX Team" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Task 4 Direct Internet Access for Site300 - Cisco Live 2023 LTRENT-2387</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Task 4 Direct Internet Access for Site300";
        var mkdocs_page_input_path = "Task4-v1.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Cisco Live 2023 LTRENT-2387
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Topology/">Topology</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../IP-Users/">Connection Details and Credentials</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Task1-Connect/">Task 1 Remote Connection</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Task2-v1/">Task 2 Devices Feature Templates</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Task3-v1/">Task 3 Regional Internet Access for All Sites</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Task 4 Direct Internet Access for Site300</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#step-1-enable-dia-on-site-300-on-vpn-10">Step 1 - Enable DIA on Site-300 on VPN-10</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#step-2-verify-internet-connectivity-on-site-300">Step 2 - Verify Internet Connectivity on Site-300</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#step-3-internet-connectivity-on-other-vpns">Step 3 - Internet Connectivity on other VPNs</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Task5-v1/">Task 5 Umbrella (SIG) for Site300</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Task6-v1/">Task 6 Umbrella Policy for Site300</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Task7-v1/">Task 7 Umbrella SIG policies for Regional Access</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Task8-v1/">Task 8 Umbrella Regional Policies</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Task9-v1/">Task 9 Monitoring on Umbrella</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Task10-v1/">Task 10 Modify Block Page Notification</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Task11-v1/">Task 11 Data Loss Prevention</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Challenge-Tasks/">Challenge Task</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Cisco Live 2023 LTRENT-2387</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Task 4 Direct Internet Access for Site300</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/ksiddiqi/LTRENT-2387.git/edit/master/docs/Task4-v1.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="task-4-direct-internet-access-for-site-300">Task 4 - Direct Internet Access for Site-300</h1>
<p>In this task, we will enable local Direct Internet Access (DIA) for Site-300. The configuration will route traffic on VPN-10 through this DIA setup. Implementing DIA at Site-300 is a strategic step towards enhancing network security. It will facilitate the setup of IPSec tunnels between Site-300 and the Umbrella Cloud, providing robust security measures from the Umbrella Cloud services. The detailed configuration of IPSec tunnels and their connectivity will be covered in a subsequent task.</p>
<h2 id="step-1-enable-dia-on-site-300-on-vpn-10">Step 1 - Enable DIA on Site-300 on VPN-10</h2>
<p><strong>Objective:</strong> Add a default route in VPN-10 pointing to VPN-0 (Global Routing Table) on the node Site300-cE1 by modifying the VPN-10 template in vManage.</p>
<p><strong>1. Navigating in vManage:</strong> </p>
<ul>
<li>On vManage, navigate to <strong>Configuration &gt; Templates</strong>.
  <img alt="vManage Configuration Templates" src="../pics/Config-Template.png" /> </li>
</ul>
<p><strong>2. Accessing Feature Templates:</strong> </p>
<ul>
<li>Click on the <strong><code>Feature Templates</code></strong> tab.
  <img alt="Feature Templates Tab" src="../pics/Config-Template-Feature.png" /></li>
</ul>
<p><strong>3. Searching for the Template:</strong> </p>
<ul>
<li>Use the search bar to find the template name <strong><code>vpn_10_site300_ce1</code></strong>.</li>
</ul>
<p><strong>4. Editing the Template:</strong> </p>
<ul>
<li>Find the template and click on the three dots <strong><code>...</code></strong> on the right side, then select <strong><code>Edit</code></strong>.
  <img alt="Edit VPN-10 Template" src="../pics/Site400-VPN10-Ftemp.png" /></li>
</ul>
<p><strong>5. Configuring IPv4 Route:</strong> </p>
<ul>
<li>Click on <strong>IPv4 Route</strong>.
  <img alt="IPv4 Route Section" src="../pics/Site400-VPN10-Ftemp-IPv4.png" /></li>
<li>In the <code>IPv4 Route</code> section, perform the following configurations:</li>
<li>Click on <strong><code>New IP Route</code></strong>.</li>
<li>In <strong>Prefix</strong>: <strong><code>0.0.0.0/0</code></strong></li>
<li>In <strong>Gateway</strong>: <strong><code>VPN</code></strong></li>
<li>In <strong>Enable VPN</strong>, select <strong><code>Global</code></strong> from the dropdown menu.
  <img alt="IPv4 Route Configuration" src="../pics/Site400-VPN10-Ftemp-IPv4-1.png" /></li>
<li>Set <strong>Enable VPN</strong> to <strong><code>On</code></strong>, click <strong><code>Add</code></strong>, then <strong><code>Update</code></strong>.
  <img alt="Enable VPN and Add" src="../pics/Site400-VPN10-Ftemp-IPv4-2.png" /></li>
</ul>
<p><strong>6. Applying Configuration Changes:</strong> </p>
<ul>
<li>Click <strong><code>Next</code></strong>.
  <img alt="Next Step" src="../pics/Site400-VPN10-Ftemp-IPv4-3a.png" /></li>
<li>Click <strong><code>Configure Devices</code></strong> to push the configuration from vManage towards cEdge.
  <img alt="Configure Devices" src="../pics/Site400-VPN10-Ftemp-IPv4-4a.png" /></li>
<li>Wait and verify that the Config-Push from vManage to cEdge device is successful.
  <img alt="Configuration Push Success" src="../pics/Site400-VPN10-Ftemp-IPv4-5.png" /></li>
</ul>
<h2 id="step-2-verify-internet-connectivity-on-site-300">Step 2 - Verify Internet Connectivity on Site-300</h2>
<p><strong>Objective:</strong> Verify Internet connectivity on Site-300 VPN-10 following the successful configuration in the previous step.</p>
<p><strong>1. Launching MTPutty (if needed):</strong> </p>
<ul>
<li>Launch <strong>MTPutty</strong> application on your RDP session (Jumphost) if it is not already open.
  <img alt="MTPutty Application" src="../pics/mPutty.png" /></li>
</ul>
<p><strong>2. SSH to Site-300 cEdge:</strong> </p>
<ul>
<li>Open <strong>MTPutty</strong> and SSH/login to <strong><code>Site300-cE1</code></strong> cEdge.</li>
<li>Verify VPN-10's routing table for a default route using <code>show ip route vrf 10</code>.
  <img alt="VPN-10 Routing Table" src="../pics/Site300-int-iproute.png" /></li>
</ul>
<p><strong>3. Verifying Default Route on Global Routing Table:</strong> </p>
<ul>
<li>Confirm the default route in the Global Routing Table (VPN-0) using <code>show ip route</code>.  It will point to <code>10.2.6.1</code> and <code>10.1.6.1</code> 
  <img alt="Global Routing Table" src="../pics/Site300-vrf0-iproute.png" /></li>
</ul>
<p><strong>4. Testing Connectivity on Ubuntu VM:</strong> </p>
<ul>
<li>Using <strong>mRemoteNG</strong>, access <code>Site300-Ubuntu-VPN10</code> VM</li>
<li>Launch <code>Terminal</code> application on this VM and then initiate <code>ping 8.8.8.8</code>.  The ping should be successful.
  <img alt="Successful Ping" src="../pics/ubuntu-ping-ok.png" /></li>
<li>Perform a traceroute using the command <code>traceroute 8.8.8.8</code>.
  <img alt="Traceroute Result" src="../pics/ubuntu-300-trace-int.png" /></li>
<li>Launch <code>Chromium Web browser</code> and verify Internet access by navigating to <code>www.cisco.com</code> or another website.
  <img alt="Internet Access" src="../pics/Internet-access.png" /></li>
</ul>
<h2 id="step-3-internet-connectivity-on-other-vpns">Step 3 - Internet Connectivity on other VPNs</h2>
<p><strong>Objective:</strong> Confirm that only Site300 VPN-10 has Direct Internet Access, while other VPNs like VPN-12 lack internet connectivity.</p>
<ul>
<li>Test internet connectivity on <code>Site300-Ubuntu-VPN12</code> using <strong>mRemoteNG</strong>.</li>
<li>Perform ping tests and attempt web browsing from the Ubuntu VM on VPN-12, which should fail, indicating no internet access.</li>
</ul>
<p><strong>Conclusion:</strong>
Upon successful completion of Task 4, Site-300 has now Direct Internet Access enabled, directing VPN-10 traffic through this newly established route.  This pivotal configuration lays the groundwork for future enhancements, particularly in terms of network security through the integration with Umbrella Cloud.  The foundation is now set for the next phase, which involves setting up and configuring IPSec tunnels to further secure the network infrastructure.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Task3-v1/" class="btn btn-neutral float-left" title="Task 3 Regional Internet Access for All Sites"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Task5-v1/" class="btn btn-neutral float-right" title="Task 5 Umbrella (SIG) for Site300">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ksiddiqi/LTRENT-2387.git" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../Task3-v1/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Task5-v1/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
