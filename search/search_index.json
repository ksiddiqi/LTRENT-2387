{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"LTRENT-2387 Welcome to Cisco Live LTRENT-2387 - Harnessing SD-WAN for Safe Cloud Adoption: Unlocking Cloud Security For full documentation visit Cisco Live . Speakers Faisal Chaudhry Distinguished Architect, Cisco CX Khurram Afzal Solution Architect, Cisco CX","title":"Home"},{"location":"#ltrent-2387","text":"Welcome to Cisco Live LTRENT-2387 - Harnessing SD-WAN for Safe Cloud Adoption: Unlocking Cloud Security For full documentation visit Cisco Live .","title":"LTRENT-2387"},{"location":"#speakers","text":"Faisal Chaudhry Distinguished Architect, Cisco CX Khurram Afzal Solution Architect, Cisco CX","title":"Speakers"},{"location":"Challenge-Tasks/","text":"Challenge Tasks Let's transition from learning to action in this challenge task. It's your chance to put your newfound knowledge into practice and showcase your abilities. Get ready to demonstrate what you've learned and let's tackle this chanllenge head-on! Challenge Task 1 - Enable DIA for Site 400 Hint - Task 3 & 4 Challenge Task 2 - Umbrella SIG for Site 400 Hint - Task 5 Challenge Task 3 - Customer Umbrella Policies for Site 400 Create a new Frewall policy for Site 400 to block FTP access to any outbound connections. Any connection to port 21 Create a new Destination List and block tiktok.com","title":"Challenge Task"},{"location":"Challenge-Tasks/#challenge-tasks","text":"Let's transition from learning to action in this challenge task. It's your chance to put your newfound knowledge into practice and showcase your abilities. Get ready to demonstrate what you've learned and let's tackle this chanllenge head-on!","title":"Challenge Tasks"},{"location":"Challenge-Tasks/#challenge-task-1-enable-dia-for-site-400","text":"Hint - Task 3 & 4","title":"Challenge Task 1 - Enable DIA for Site 400"},{"location":"Challenge-Tasks/#challenge-task-2-umbrella-sig-for-site-400","text":"Hint - Task 5","title":"Challenge Task 2 - Umbrella SIG for Site 400"},{"location":"Challenge-Tasks/#challenge-task-3-customer-umbrella-policies-for-site-400","text":"Create a new Frewall policy for Site 400 to block FTP access to any outbound connections. Any connection to port 21 Create a new Destination List and block tiktok.com","title":"Challenge Task 3 - Customer Umbrella Policies for Site 400"},{"location":"IP-Users/","text":"Address Plan, Connection Details and Credentials WAN Edges - Internal Node System IP Site ID VPN 10 Loopback10 Site100-cE1 1.1.10.1 100 100.110.10.1 Site200-cE1 1.1.20.1 200 100.110.20.1 Site300-cE1 1.1.30.1 300 100.110.30.1 Site400-cE1 1.1.40.1 400 100.110.40.1 WAN Edges \u2013 External Node MPLS TLOC (Gi2) Internet TLOC (Gi1) VPN 10 LAN (Gi3) VPN 12 LAN (Gi3) Site100-cE1 10.1.2.2/24 10.2.2.2/24 10.10.1.1/24 - Site200-cE1 10.1.4.2/24 10.2.4.2/24 10.20.1.1/24 - Site300-cE1 10.1.6.2/24 10.2.6.2/24 10.30.1.1/24 10.32.1.1/24 Site400-cE1 10.1.7.2/24 10.2.7.2/24 10.40.1.1/24 10.42.1.1/24 Controllers Node System Site ID vManage 1.1.1.1 1 vBond 1.1.1.2 - vSmart-1 1.1.1.3 1 vSmart-2 1.1.1.4 1 3rd Party Devices Node Type Site VPN ID IP address Site300-Ubuntu-VPN10 Host 300 10 10.30.1.10/24 Site300-Ubuntu-VPN12 Host 300 12 10.32.1.10/24 Site400-Ubuntu-VPN10 Host 400 10 10.40.1.10/24 Site400-Ubuntu-VPN12 Host 400 12 10.42.1.10/24 UI Credentials and Connection Details Node IP Port Username Password vManage 198.18.133.200 8443 admin C1sco12345 Site300-Ubuntu-VPN10 198.18.133.200 30503 ubuntu viptela Site300-Ubuntu-VPN12 198.18.133.200 30504 ubuntu viptela Site400-Ubuntu-VPN10 198.18.133.200 30501 ubuntu viptela Site400-Ubuntu-VPN12 198.18.133.200 30500 ubuntu viptela SSH Credential and Connection Details Node IP Port Username Password vManage 198.18.133.200 19001 admin C1sco12345 vBond 198.18.133.200 19002 admin admin vSmart-1 198.18.133.200 19003 admin admin vSmart-2 198.18.133.200 19005 admin admin Site100-cE1 198.18.133.200 19007 admin admin Site200-cE1 198.18.133.200 19011 admin admin Site300-cE1 198.18.133.200 19017 admin admin Site400-cE1 198.18.133.200 19021 admin admin","title":"Connection Details and Credentials"},{"location":"IP-Users/#address-plan-connection-details-and-credentials","text":"","title":"Address Plan, Connection Details and Credentials"},{"location":"IP-Users/#wan-edges-internal","text":"Node System IP Site ID VPN 10 Loopback10 Site100-cE1 1.1.10.1 100 100.110.10.1 Site200-cE1 1.1.20.1 200 100.110.20.1 Site300-cE1 1.1.30.1 300 100.110.30.1 Site400-cE1 1.1.40.1 400 100.110.40.1","title":"WAN Edges - Internal"},{"location":"IP-Users/#wan-edges-external","text":"Node MPLS TLOC (Gi2) Internet TLOC (Gi1) VPN 10 LAN (Gi3) VPN 12 LAN (Gi3) Site100-cE1 10.1.2.2/24 10.2.2.2/24 10.10.1.1/24 - Site200-cE1 10.1.4.2/24 10.2.4.2/24 10.20.1.1/24 - Site300-cE1 10.1.6.2/24 10.2.6.2/24 10.30.1.1/24 10.32.1.1/24 Site400-cE1 10.1.7.2/24 10.2.7.2/24 10.40.1.1/24 10.42.1.1/24","title":"WAN Edges \u2013 External"},{"location":"IP-Users/#controllers","text":"Node System Site ID vManage 1.1.1.1 1 vBond 1.1.1.2 - vSmart-1 1.1.1.3 1 vSmart-2 1.1.1.4 1","title":"Controllers"},{"location":"IP-Users/#3rd-party-devices","text":"Node Type Site VPN ID IP address Site300-Ubuntu-VPN10 Host 300 10 10.30.1.10/24 Site300-Ubuntu-VPN12 Host 300 12 10.32.1.10/24 Site400-Ubuntu-VPN10 Host 400 10 10.40.1.10/24 Site400-Ubuntu-VPN12 Host 400 12 10.42.1.10/24","title":"3rd Party Devices"},{"location":"IP-Users/#ui-credentials-and-connection-details","text":"Node IP Port Username Password vManage 198.18.133.200 8443 admin C1sco12345 Site300-Ubuntu-VPN10 198.18.133.200 30503 ubuntu viptela Site300-Ubuntu-VPN12 198.18.133.200 30504 ubuntu viptela Site400-Ubuntu-VPN10 198.18.133.200 30501 ubuntu viptela Site400-Ubuntu-VPN12 198.18.133.200 30500 ubuntu viptela","title":"UI Credentials and Connection Details"},{"location":"IP-Users/#ssh-credential-and-connection-details","text":"Node IP Port Username Password vManage 198.18.133.200 19001 admin C1sco12345 vBond 198.18.133.200 19002 admin admin vSmart-1 198.18.133.200 19003 admin admin vSmart-2 198.18.133.200 19005 admin admin Site100-cE1 198.18.133.200 19007 admin admin Site200-cE1 198.18.133.200 19011 admin admin Site300-cE1 198.18.133.200 19017 admin admin Site400-cE1 198.18.133.200 19021 admin admin","title":"SSH Credential and Connection Details"},{"location":"Task1-Connect/","text":"Your first task will log on to remote lab using VPN. At the end of this task, you will have a fully network connectivity to a remote server using Remote Desktop. Step 1: Connect to lab using anyconnect VPN You will connect to remote Lab using Cisco VPN AnyConnect client, as shown in below picture. Launch the Cisco VPN AnyConnect client from your PC Enter the remote server for your pod as provided by Lab Speakers. This remote server will be dcloud-sjc-anyconnect.cisco.com or dcloud-rtp-anyconnect.cisco.com The username and password credentials for this VPN connection will also be provided by the lab admin Note: Lab admins will furnish the credentials information to each participant. If you don't have this information please ask the lab speakers. Below is an example of user logging into a reference pod in dcloud-sjc-anyconnect.cisco.com : Hit Accept when the prompt appears to accept the VPN connection login Note: Credentials used in above screenshot are provided as an example only. Credentials for each pod will be provided by the lab speakers. Step 2: RDP to workstation In this step, you will connect to the workstation with Remote Desktop ( RDP ) client on your machines. Use below details for this RDP session: Workstation/Computer : 198.18.133.36 Username : Admin Password : C1sco12345 Below screenshot is only an example for this RDP connection: Note: above screenshot is provided as an example only. Step 3: MTPutty and Browser Once you have the RDP session to the remote workstation (Jumphost), then you will use MTputty client (pre-installed on the remote workstation) and Chrome Browser to connect to all devices in this lab. MTputty is already installed on the Desktop of the workstation where you connected using RDP. Run this application by clicking on the icon on the desktop:","title":"Task 1 Remote Connection"},{"location":"Task1-Connect/#step-1-connect-to-lab-using-anyconnect-vpn","text":"You will connect to remote Lab using Cisco VPN AnyConnect client, as shown in below picture. Launch the Cisco VPN AnyConnect client from your PC Enter the remote server for your pod as provided by Lab Speakers. This remote server will be dcloud-sjc-anyconnect.cisco.com or dcloud-rtp-anyconnect.cisco.com The username and password credentials for this VPN connection will also be provided by the lab admin Note: Lab admins will furnish the credentials information to each participant. If you don't have this information please ask the lab speakers. Below is an example of user logging into a reference pod in dcloud-sjc-anyconnect.cisco.com : Hit Accept when the prompt appears to accept the VPN connection login Note: Credentials used in above screenshot are provided as an example only. Credentials for each pod will be provided by the lab speakers.","title":"Step 1: Connect to lab using anyconnect VPN"},{"location":"Task1-Connect/#step-2-rdp-to-workstation","text":"In this step, you will connect to the workstation with Remote Desktop ( RDP ) client on your machines. Use below details for this RDP session: Workstation/Computer : 198.18.133.36 Username : Admin Password : C1sco12345 Below screenshot is only an example for this RDP connection: Note: above screenshot is provided as an example only.","title":"Step 2: RDP to workstation"},{"location":"Task1-Connect/#step-3-mtputty-and-browser","text":"Once you have the RDP session to the remote workstation (Jumphost), then you will use MTputty client (pre-installed on the remote workstation) and Chrome Browser to connect to all devices in this lab. MTputty is already installed on the Desktop of the workstation where you connected using RDP. Run this application by clicking on the icon on the desktop:","title":"Step 3: MTPutty and Browser"},{"location":"Task10-v1/","text":"Task 10 - Block Page This task guides through the process of customizing the block page displayed to users when a web policy is enforced on regional sites, Site-100 and Site-400. Step 1 - Umbrella Web Policy Objective: Configure a new block page on the Umbrella Dashboard. 1. Accessing Block Page Settings: On the RDP session (jumphost), logon to Umbrella Dashboard by clicking on Google Chrome Browser bookmark named Umbrella SSO . It will open the Umbrella dashboard and auto-login using single-sign-on. 2. Configuring the Block Page: Navigate to Policies > Policy Components > Block Page Appearance . Then click Add on the top right to add a new Block page as shown in below screenshot: On the Add New Block Page Appearance web page, configure the below settings: Name: Block Page Regional Click on Block Page Appearance to expand it's settings Click on Show a block page with a custom message In the text box, enter text of Regional Block Page (You may enter your own text here!) Click Save at the bottom right 3. Applying the Block Page to Web Policy On Umbrella dashboard, navigate to Policies > Management > Web Policy and click on previously configured Ruleset 2 On the Rule 2 page, navigate to Ruleset Settings and scroll down to Block Page setting and click Edit : On the Block page select Custom Appearance and then select Block Page Regional from the dropdown menu and click Save : Now the newly created Block Page Regional should appear for under the Settings of Ruleset 2 : Step 2 - Verify new Block Page Objective: Validate the new block page for Site-400 and confirm the original block page for Site-300. 1. Testing on Site-400: Launch console access to ubuntu Site400-Ubuntu-VPN10 host by using mRemoteNG application. Login with credentials of viptela Use Chromium Browser to navigate onto traditional websites, such as www.cisco.com . Access to this website should work. Use Chromium Browser to navigate to www.chase.com . As per our Umbrella Web Policy, this sites should be blocked and, as expected, the newly created Umbrella block page will appear. 2. Testing on Site-300: Now lets validate that the original Block page is shown for SD-WAN Site-300. Launch console access to ubuntu Site300-Ubuntu-VPN10 host by using mRemoteNG application. Login with credentials of viptela Use Chromium Browser to navigate onto traditional websites, such as www.cisco.com . Access to this website should work. Use Chromium Browser to navigate to www.cnn.com . As per our Umbrella Web Policy, this sites should be blocked and, as expected, the original block page will appear. Conclusion: With the successful implementation of Task 10, the regional sites now have a customized block page, enhancing the user experience when web policies are enforced. This customization allows for a more tailored approach to displaying block messages, aligning with the specific needs and branding of the organization.","title":"Task 10 Modify Block Page Notification"},{"location":"Task10-v1/#task-10-block-page","text":"This task guides through the process of customizing the block page displayed to users when a web policy is enforced on regional sites, Site-100 and Site-400.","title":"Task 10 - Block Page"},{"location":"Task10-v1/#step-1-umbrella-web-policy","text":"Objective: Configure a new block page on the Umbrella Dashboard. 1. Accessing Block Page Settings: On the RDP session (jumphost), logon to Umbrella Dashboard by clicking on Google Chrome Browser bookmark named Umbrella SSO . It will open the Umbrella dashboard and auto-login using single-sign-on. 2. Configuring the Block Page: Navigate to Policies > Policy Components > Block Page Appearance . Then click Add on the top right to add a new Block page as shown in below screenshot: On the Add New Block Page Appearance web page, configure the below settings: Name: Block Page Regional Click on Block Page Appearance to expand it's settings Click on Show a block page with a custom message In the text box, enter text of Regional Block Page (You may enter your own text here!) Click Save at the bottom right 3. Applying the Block Page to Web Policy On Umbrella dashboard, navigate to Policies > Management > Web Policy and click on previously configured Ruleset 2 On the Rule 2 page, navigate to Ruleset Settings and scroll down to Block Page setting and click Edit : On the Block page select Custom Appearance and then select Block Page Regional from the dropdown menu and click Save : Now the newly created Block Page Regional should appear for under the Settings of Ruleset 2 :","title":"Step 1 - Umbrella Web Policy"},{"location":"Task10-v1/#step-2-verify-new-block-page","text":"Objective: Validate the new block page for Site-400 and confirm the original block page for Site-300. 1. Testing on Site-400: Launch console access to ubuntu Site400-Ubuntu-VPN10 host by using mRemoteNG application. Login with credentials of viptela Use Chromium Browser to navigate onto traditional websites, such as www.cisco.com . Access to this website should work. Use Chromium Browser to navigate to www.chase.com . As per our Umbrella Web Policy, this sites should be blocked and, as expected, the newly created Umbrella block page will appear. 2. Testing on Site-300: Now lets validate that the original Block page is shown for SD-WAN Site-300. Launch console access to ubuntu Site300-Ubuntu-VPN10 host by using mRemoteNG application. Login with credentials of viptela Use Chromium Browser to navigate onto traditional websites, such as www.cisco.com . Access to this website should work. Use Chromium Browser to navigate to www.cnn.com . As per our Umbrella Web Policy, this sites should be blocked and, as expected, the original block page will appear. Conclusion: With the successful implementation of Task 10, the regional sites now have a customized block page, enhancing the user experience when web policies are enforced. This customization allows for a more tailored approach to displaying block messages, aligning with the specific needs and branding of the organization.","title":"Step 2 - Verify new Block Page"},{"location":"Task11-v1/","text":"Task 11 - Data Loss Prevention Umbrella Data Loss Prevention (DLP) policy helps to protect sensitive data uploaded to the web. It discovers and protects sensitive data stored being exposed outside of an organization. This task focuses on setting up a Data Loss Prevention (DLP) policy in Umbrella to protect sensitive data, specifically adhering to GDPR compliance. This task involves creating a policy to monitor and then block files containing personal information. Step 1 - Umbrella DLP Monitor Policy Objective: Configure a DLP rule to monitor GDPR compliance. 1. Configuring DLP Monitor Policy: On the RDP session (jumphost), logon to Umbrella Dashboard by clicking on Google Chrome Browser bookmark named Umbrella SSO . It will open the Umbrella dashboard and auto-login using single-sign-on. Navigate to Policies > Management > Data Loss Prevention Policy . Then click Add Rule on the right pane and select Real Time Rule to add a new DLP Policy as shown in below screenshot: On the Add New Real Time Rule web page, configure the below settings and as shown in below screenshots Rule Name : DLP GDPR From the Severity dropdown menu select Medium In Data Classifications section, select Built-in GDPR classification . Note you can click Preview to view the Data Identifiers In the Identities , select Tunnels to use the traffic from all SD-WAN sites In the Destination section, click on All Destinations Within Action section, select Monitor from the dropdown menu Click Save at the bottom right Now the DLP policy to inspect (Monitor) the compliance of GDPR data has been configured. Step 2 - Sample file for DLP Objective: Download a sample file to test the DLP policy on Site-300 host. This file has sample data that includes items such as Name, Birth date, Gender, address etc. If this file is published to cloud, then this data in file will result in raising a compliance alarm on Umbrella, as per our policy. 1. Downloading the Sample File: Launch console access to ubuntu Site300-Ubuntu-VPN10 host by using mRemoteNG application. Login with credentials of viptela . Use Chromium Browser on this VM to navigate onto website with URL of dlptest.com/sample-data . Scroll (down) to Sample SSN and CCN Files on this website and then click to download CSV File as shown in below figure. This file will be automically saved on the Downloads folder on the VM. Now we have the sample file available on our host VM to test it. Step 3 - Validate DLP Monitor Policy Objective: Publish the sample file to validate the DLP monitoring policy. Umbrella will detect the GDPR compliance data violation as per our policy. 1. Uploading the File: If required, re-launch console access to ubuntu Site300-Ubuntu-VPN10 host by using mRemoteNG application. Login with credentials of viptela Use Chromium Browser to navigate to website: dlptest.com/http-post/ On this web page, on Chromium Browser, navigate to File Upload * section. Click on Drop a file here or click to upload as shown in below screenshot: On the Open Files page, click on Downloads , then click on sample-data.csv and click Open to upload the file: The file will be uploaded successfully. You will see the message as shown in below screenshot 2. Monitoring the Compliance Report: Now let's navigate to Umbrella to check if a compliance alarm was raised as per our policy. On the RDP session (jumphost), logon to Umbrella Dashboard by clicking on Google Chrome Browser bookmark named Umbrella SSO . It will open the Umbrella dashboard and auto-login using single-sign-on. Navigate to Reporting > Additional Reports > Data Loss Prevention . On the right pane, you should see an Event Type of Real Time with Severity of Medium and other details related to the File upload to DLP Test website. Further on the right side of each row, click on the three dots ( ... ) and then click View Full Details to check the various GDPR related violations detected by Umbrella. Below is a sample screenshot for such event, your view may be little different. This event confirms that Umbrella has detected the compliance violation. Step 4 - Umbrella DLP Block Policy Objective: Modify the DLP policy to block content breaching the GDPR compliance. 1. Editing the DLP Rule to Block: On the RDP session (jumphost), logon to Umbrella Dashboard by clicking on Google Chrome Browser bookmark named Umbrella SSO . It will open the Umbrella dashboard and auto-login using single-sign-on. Navigate to Policies > Management > Data Loss Prevention Policy . One DLP Rule should appear on the right pane. Click on the three dots ( ... ) on the right side as shown in below screenshot and then click Edit Rule : On the Edit Real Time Rule scroll down to the Action section and select the action of Block from the dropdown menu and click Save : Now this rule has been edited with block action instead of just monitor. Step 5 - Validate DLP Block Policy Objective: Test the DLP block policy by attempting to upload the sample file again.Umbrella will detect the GDPR compliance data violation as per our policy and block uploading of this file. 1. Testing File Upload Post Policy Change: Launch console access to ubuntu Site300-Ubuntu-VPN10 host by using mRemoteNG application. Login with credentials of viptela Use Chromium Browser to navigate to website: dlptest.com/http-post/ . If you already have this webiste open on Chromium Browser, you must refresh the browser to navigate on to this page again. On this web page, on Chromium Browser, navigate to File Upload * section. Click on Drop a file here or click to upload as done in previous step in this task. On the Open Files page, click on Downloads , then click on sample-data.csv and click Open to upload the file The file upload will fail. You will see the message as shown in below screenshot 2. Monitoring the Compliance Report: Now let's navigate to Umbrella to check if a compliance event was raised as per Block policy. On the RDP session (jumphost), logon to Umbrella Dashboard by clicking on Google Chrome Browser bookmark named Umbrella SSO . It will open the Umbrella dashboard and auto-login using single-sign-on. Navigate to Reporting > Additional Reports > Data Loss Prevention . On the right pane, you should see an Event Type of Real Time with Severity of Medium and other details related to the File upload to DLP Test website. This event should have an action of Blocked Further on the right side of each row, click on the three dots ( ... ) and then click View Full Details to check the various GDPR related violations detected by Umbrella. Below is a sample screenshot for such block event, your view may be little different. This event confirms that Umbrella has detected the compliance violation and resulted in Blocking the upload of this file. Conclusion: This task successfully demonstrates the capability of Umbrella's DLP policy in monitoring and blocking sensitive data in compliance with GDPR. The task illustrates how sensitive data, when detected in transit, can trigger appropriate responses, ranging from alerts to outright blocking, thereby reinforcing the organization's data protection framework.","title":"Task 11 Data Loss Prevention"},{"location":"Task11-v1/#task-11-data-loss-prevention","text":"Umbrella Data Loss Prevention (DLP) policy helps to protect sensitive data uploaded to the web. It discovers and protects sensitive data stored being exposed outside of an organization. This task focuses on setting up a Data Loss Prevention (DLP) policy in Umbrella to protect sensitive data, specifically adhering to GDPR compliance. This task involves creating a policy to monitor and then block files containing personal information.","title":"Task 11 - Data Loss Prevention"},{"location":"Task11-v1/#step-1-umbrella-dlp-monitor-policy","text":"Objective: Configure a DLP rule to monitor GDPR compliance. 1. Configuring DLP Monitor Policy: On the RDP session (jumphost), logon to Umbrella Dashboard by clicking on Google Chrome Browser bookmark named Umbrella SSO . It will open the Umbrella dashboard and auto-login using single-sign-on. Navigate to Policies > Management > Data Loss Prevention Policy . Then click Add Rule on the right pane and select Real Time Rule to add a new DLP Policy as shown in below screenshot: On the Add New Real Time Rule web page, configure the below settings and as shown in below screenshots Rule Name : DLP GDPR From the Severity dropdown menu select Medium In Data Classifications section, select Built-in GDPR classification . Note you can click Preview to view the Data Identifiers In the Identities , select Tunnels to use the traffic from all SD-WAN sites In the Destination section, click on All Destinations Within Action section, select Monitor from the dropdown menu Click Save at the bottom right Now the DLP policy to inspect (Monitor) the compliance of GDPR data has been configured.","title":"Step 1 - Umbrella DLP Monitor Policy"},{"location":"Task11-v1/#step-2-sample-file-for-dlp","text":"Objective: Download a sample file to test the DLP policy on Site-300 host. This file has sample data that includes items such as Name, Birth date, Gender, address etc. If this file is published to cloud, then this data in file will result in raising a compliance alarm on Umbrella, as per our policy. 1. Downloading the Sample File: Launch console access to ubuntu Site300-Ubuntu-VPN10 host by using mRemoteNG application. Login with credentials of viptela . Use Chromium Browser on this VM to navigate onto website with URL of dlptest.com/sample-data . Scroll (down) to Sample SSN and CCN Files on this website and then click to download CSV File as shown in below figure. This file will be automically saved on the Downloads folder on the VM. Now we have the sample file available on our host VM to test it.","title":"Step 2 - Sample file for DLP"},{"location":"Task11-v1/#step-3-validate-dlp-monitor-policy","text":"Objective: Publish the sample file to validate the DLP monitoring policy. Umbrella will detect the GDPR compliance data violation as per our policy. 1. Uploading the File: If required, re-launch console access to ubuntu Site300-Ubuntu-VPN10 host by using mRemoteNG application. Login with credentials of viptela Use Chromium Browser to navigate to website: dlptest.com/http-post/ On this web page, on Chromium Browser, navigate to File Upload * section. Click on Drop a file here or click to upload as shown in below screenshot: On the Open Files page, click on Downloads , then click on sample-data.csv and click Open to upload the file: The file will be uploaded successfully. You will see the message as shown in below screenshot 2. Monitoring the Compliance Report: Now let's navigate to Umbrella to check if a compliance alarm was raised as per our policy. On the RDP session (jumphost), logon to Umbrella Dashboard by clicking on Google Chrome Browser bookmark named Umbrella SSO . It will open the Umbrella dashboard and auto-login using single-sign-on. Navigate to Reporting > Additional Reports > Data Loss Prevention . On the right pane, you should see an Event Type of Real Time with Severity of Medium and other details related to the File upload to DLP Test website. Further on the right side of each row, click on the three dots ( ... ) and then click View Full Details to check the various GDPR related violations detected by Umbrella. Below is a sample screenshot for such event, your view may be little different. This event confirms that Umbrella has detected the compliance violation.","title":"Step 3 - Validate DLP Monitor Policy"},{"location":"Task11-v1/#step-4-umbrella-dlp-block-policy","text":"Objective: Modify the DLP policy to block content breaching the GDPR compliance. 1. Editing the DLP Rule to Block: On the RDP session (jumphost), logon to Umbrella Dashboard by clicking on Google Chrome Browser bookmark named Umbrella SSO . It will open the Umbrella dashboard and auto-login using single-sign-on. Navigate to Policies > Management > Data Loss Prevention Policy . One DLP Rule should appear on the right pane. Click on the three dots ( ... ) on the right side as shown in below screenshot and then click Edit Rule : On the Edit Real Time Rule scroll down to the Action section and select the action of Block from the dropdown menu and click Save : Now this rule has been edited with block action instead of just monitor.","title":"Step 4 - Umbrella DLP Block Policy"},{"location":"Task11-v1/#step-5-validate-dlp-block-policy","text":"Objective: Test the DLP block policy by attempting to upload the sample file again.Umbrella will detect the GDPR compliance data violation as per our policy and block uploading of this file. 1. Testing File Upload Post Policy Change: Launch console access to ubuntu Site300-Ubuntu-VPN10 host by using mRemoteNG application. Login with credentials of viptela Use Chromium Browser to navigate to website: dlptest.com/http-post/ . If you already have this webiste open on Chromium Browser, you must refresh the browser to navigate on to this page again. On this web page, on Chromium Browser, navigate to File Upload * section. Click on Drop a file here or click to upload as done in previous step in this task. On the Open Files page, click on Downloads , then click on sample-data.csv and click Open to upload the file The file upload will fail. You will see the message as shown in below screenshot 2. Monitoring the Compliance Report: Now let's navigate to Umbrella to check if a compliance event was raised as per Block policy. On the RDP session (jumphost), logon to Umbrella Dashboard by clicking on Google Chrome Browser bookmark named Umbrella SSO . It will open the Umbrella dashboard and auto-login using single-sign-on. Navigate to Reporting > Additional Reports > Data Loss Prevention . On the right pane, you should see an Event Type of Real Time with Severity of Medium and other details related to the File upload to DLP Test website. This event should have an action of Blocked Further on the right side of each row, click on the three dots ( ... ) and then click View Full Details to check the various GDPR related violations detected by Umbrella. Below is a sample screenshot for such block event, your view may be little different. This event confirms that Umbrella has detected the compliance violation and resulted in Blocking the upload of this file. Conclusion: This task successfully demonstrates the capability of Umbrella's DLP policy in monitoring and blocking sensitive data in compliance with GDPR. The task illustrates how sensitive data, when detected in transit, can trigger appropriate responses, ranging from alerts to outright blocking, thereby reinforcing the organization's data protection framework.","title":"Step 5 - Validate DLP Block Policy"},{"location":"Task2-v1/","text":"Task 2 - vManage Templates Cisco SD-WAN vManage is a centralized network management system that simplifies the configuration, monitoring, and management of Cisco's SD-WAN infrastructure. Cisco vManage Device and Feature templates are key components of the Cisco SD-WAN solution. These templates are used to simplify the process of configuring and managing SD-WAN devices in a network, offering a standardized and scalable way to deploy configurations to multiple devices. This approach ensures consistency and reduces the likelihood of manual errors. In this lab, vManage has been pre-configured with various Device and Feature Templates. The pre-configured templates contain all the configurations required for a functional SD-WAN Fabric. In this task, we will attach cEdges (Site-100, Site-300, and Site-400) to their respective vManage Templates and this is performed on a GUI via a web browser. This process streamlines network management by enabling efficient scalability and reducing manual configuration errors. It allows for the rapid deployment of new devices and easy updates to existing ones, ensuring network settings are in line with predefined policies and standards. Step 1 - vManage GUI Objective: In this step, we will access the Cisco SD-WAN vManage through a web browser for provisioning. All provisioning tasks will be performed using a Google Chrome browser on the RDP session (i.e., Jumphost). Log on to the vManage GUI by launching the Google Chrome web browser, which can be found either on the Desktop or in the Taskbar of your RDP session (Jumphost). After launching Chrome, click on the vManage bookmark on the bookmark bar. Log in to vManage using the following credentials: Username: admin Password: C1sco12345 Step 2 - Device Template for cEdges Objective: In this step, we will manage the device templates for the cEdge devices in the Cisco SD-WAN vManage. This involves identifying and attaching the correct device templates to their respective cEdge devices as per the specified criteria. 1. Navigating in vManage: After logging into vManage, click on the three bars () at the top left side to open the navigation menu. 2. Accessing Device Templates: Navigate to Configuration > Templates . 3. Selecting Device Templates: On the Configuration - Templates page, click on Device Templates . 4. Identifying cEdge Devices: The Device Template page lists various control and cEdge devices. We will only attach the device template to their respective cEdge as per the following table. The cEdge devices can be recognized by their Description : Description vEdge Device template of Site100-cE1 with Site ID: 100 and System IP: 1.1.10.1 Site100-cE1 Device template of Site300-cE1 with Site ID: 300 and System IP: 1.1.30.1 Site300-cE1 Device template of Site400-cE1 with Site ID: 400 and System IP: 1.1.40.1 Site400-cE1 Note: Please don't add Site200-CE1 to any template. 5. Attaching Device Templates: Locate the Site100-cE1 device from its description and click on the three dots ( ... ) on the right side. On the Attach Devices page, scroll down to or search for Site100-cE1 and select it with the Right arrow ( > ). After selecting the Site100-cE1, click on Attach . 6. Completing the Attachment Process: On the next page, click Next . Finally, click on Configure Devices to attach the template configurations to the cEdge device. Wait for the task to be successful. Important Note: The above screenshots are for Site-100 cE1 only. You must repeat these tasks for Site300-cE1 and Site400-cE1 . Conclusion: The device templates for cEdge devices are now correctly configured and attached in vManage, ensuring proper management and configuration of these devices as per the network requirements.","title":"Task 2 Devices Feature Templates"},{"location":"Task2-v1/#task-2-vmanage-templates","text":"Cisco SD-WAN vManage is a centralized network management system that simplifies the configuration, monitoring, and management of Cisco's SD-WAN infrastructure. Cisco vManage Device and Feature templates are key components of the Cisco SD-WAN solution. These templates are used to simplify the process of configuring and managing SD-WAN devices in a network, offering a standardized and scalable way to deploy configurations to multiple devices. This approach ensures consistency and reduces the likelihood of manual errors. In this lab, vManage has been pre-configured with various Device and Feature Templates. The pre-configured templates contain all the configurations required for a functional SD-WAN Fabric. In this task, we will attach cEdges (Site-100, Site-300, and Site-400) to their respective vManage Templates and this is performed on a GUI via a web browser. This process streamlines network management by enabling efficient scalability and reducing manual configuration errors. It allows for the rapid deployment of new devices and easy updates to existing ones, ensuring network settings are in line with predefined policies and standards.","title":"Task 2 - vManage Templates"},{"location":"Task2-v1/#step-1-vmanage-gui","text":"Objective: In this step, we will access the Cisco SD-WAN vManage through a web browser for provisioning. All provisioning tasks will be performed using a Google Chrome browser on the RDP session (i.e., Jumphost). Log on to the vManage GUI by launching the Google Chrome web browser, which can be found either on the Desktop or in the Taskbar of your RDP session (Jumphost). After launching Chrome, click on the vManage bookmark on the bookmark bar. Log in to vManage using the following credentials: Username: admin Password: C1sco12345","title":"Step 1 - vManage GUI"},{"location":"Task2-v1/#step-2-device-template-for-cedges","text":"Objective: In this step, we will manage the device templates for the cEdge devices in the Cisco SD-WAN vManage. This involves identifying and attaching the correct device templates to their respective cEdge devices as per the specified criteria. 1. Navigating in vManage: After logging into vManage, click on the three bars () at the top left side to open the navigation menu. 2. Accessing Device Templates: Navigate to Configuration > Templates . 3. Selecting Device Templates: On the Configuration - Templates page, click on Device Templates . 4. Identifying cEdge Devices: The Device Template page lists various control and cEdge devices. We will only attach the device template to their respective cEdge as per the following table. The cEdge devices can be recognized by their Description : Description vEdge Device template of Site100-cE1 with Site ID: 100 and System IP: 1.1.10.1 Site100-cE1 Device template of Site300-cE1 with Site ID: 300 and System IP: 1.1.30.1 Site300-cE1 Device template of Site400-cE1 with Site ID: 400 and System IP: 1.1.40.1 Site400-cE1 Note: Please don't add Site200-CE1 to any template. 5. Attaching Device Templates: Locate the Site100-cE1 device from its description and click on the three dots ( ... ) on the right side. On the Attach Devices page, scroll down to or search for Site100-cE1 and select it with the Right arrow ( > ). After selecting the Site100-cE1, click on Attach . 6. Completing the Attachment Process: On the next page, click Next . Finally, click on Configure Devices to attach the template configurations to the cEdge device. Wait for the task to be successful. Important Note: The above screenshots are for Site-100 cE1 only. You must repeat these tasks for Site300-cE1 and Site400-cE1 . Conclusion: The device templates for cEdge devices are now correctly configured and attached in vManage, ensuring proper management and configuration of these devices as per the network requirements.","title":"Step 2 - Device Template for cEdges"},{"location":"Task3-v1/","text":"Task 3 - Internet Access for All Sites In this task, our primary goal is to enable internet access for VPN-10 at Site-100. We will achieve this by routing the VPN-10 traffic through the Global Routing Table. The process involves a series of structured steps: 1. Enabling Internet Access for VPN-10 on Site-100: We will start by configuring Site-100 to allow VPN-10 traffic to access the internet through the Global Routing Table. This is a crucial step in ensuring that Site-100 can serve as a gateway for internet access. 2. Propagating the Default Route: The next significant step is to propagate a default route from Site-100 to other sites within the network (specifically Site-400 and Site-300) that are also on VPN-10. By doing this, we essentially enable Site-400 and Site-300 to use Site-100 as their default gateway on VPN-10. 3. Routing Internet Traffic via Site-100: Consequently, both Site-400 and Site-300 will begin routing their internet traffic through Site-100. This is achieved by efficiently utilizing the SD-WAN Fabric, which facilitates the traffic flow between these sites. 4. Verification and Testing: Throughout the task, we will conduct a series of verifications and tests. These are designed to ensure that each step is successfully implemented and that internet connectivity is reliably established across the sites on VPN-10. By the end of this task, we will have established a streamlined and efficient routing mechanism that leverages Site-100 as a pivotal access point for internet connectivity for VPN-10 across multiple sites. Step 1 \u2013 Verify No Internet Access on VPN-10 of Site-400 and Site-300 Objective: Confirm that there is currently no internet access on VPN-10 for both Site-400 and Site-300. 1. Launching mRemoteNG: On your RDP session, open the mRemoteNG application. This application provides access to the console of all Ubuntu machines (Virtual Machines/hosts) on the respective LANs (VPNs) of the SD-WAN sites. 2. Accessing Site-400's VM: In the mRemoteNG application, under VNC Sessions , click on Site400-Ubuntu-VPN10 . This VM is located on the VPN-10 (LAN segment) of Site-400. 3. Logging into the Ubuntu VM: If the console is locked, click on the console screen. Use the following credentials to log in: Username: ubuntu Password: viptela 4. Testing Internet Browser Access: On the Ubuntu desktop, click on the Chromium Web Browser icon to launch it. Try accessing an internet website, such as cisco.com . The access should fail, indicating no internet connectivity. 5. Testing Network Connectivity: Open the Terminal application by clicking its icon on the desktop. In the Terminal, execute ping 8.8.8.8 and press Ctrl+C after a few seconds to stop the ping. A failed ping with 100% packet loss indicates no internet access. 6. Repeating the Process for Site-300: Use mRemoteNG to access the console of Site300-Ubuntu-VPN10 . Repeat the steps to verify the absence of internet access on this VM as well. Step 2 - Enable Internet on VPN-10 of Site-100 Objective: Route traffic from VPN-10 on Site-100 to the Global Routing Table (GRT), also known as VPN-0, to enable internet access. 1. Launching MTPutty: Start the MTPutty application. You can find it either on the Desktop or in the Taskbar of your RDP session (Jumphost). 2. Accessing Site-400 cEdge: Use MTPutty to SSH into Site400-cE1 cEdge. Select the saved Putty session for Site400-cE1. When prompted, enter the following credentials: Username: admin Password: admin 3. Verifying the Routing Table: Execute the command show ip route vrf 10 to check the routing table. Confirm that there is no default route in VRF-10. 4. Configuring Default Route on Site100-cE1: Now, let's add a default route in VPN-10 pointing to VPN-0 on the Site100-cE1 node. This is done by modifying the Feature Template for VPN-10 in the vManage GUI. 5. Editing Feature Template in vManage: Navigate to Configuration > Templates on vManage. Click on the Feature Templates tab. Use the search bar to find the template named VPN_10_05-09-2022_17-18-00_vedge-C8000V_1201 . Click the three dots ... beside the template and select Edit . 6. Adding IPv4 Route: On the editing page, click on IPv4 Route . Perform the following configurations in the IPv4 Route section: Click New IPv4 Route . Enter 0.0.0.0/0 in Prefix . Select VPN in Gateway . Choose Global from the dropdown menu in Enable VPN . Set Enable VPN to On . Click Add and then Update to save the changes. 7. Applying the Configuration: Click Next to proceed with the configuration. Select Configure Devices to push the configuration from vManage to the cEdge device. Wait and confirm that the configuration push from vManage to the cEdge device is successful. Result: By completing these steps, VPN-10 on Site-100 will be configured to route its internet traffic through the Global Routing Table (VPN-0), enabling internet access. Step 3 - Default Route Propagation from Site-100 on VPN-10 Objective: Propagate the default route from Site-100 to other sites over the SD-WAN Fabric, following the configuration of VPN-10 traffic routing to the Global Routing Table (VPN-0) on Site100-cE1. 1. Navigating in vManage: In vManage, go to Configuration > Templates . 2. Accessing Device Templates: Click on the Device Templates tab. 3. Editing Site-100 Device Template: Find Site-100 Device Template and click on the three dots ( ... ) at the right side of it. 4. Working with Additional Templates: Click on Additional Templates . 5. Creating a CLI Add-on Template: From the CLI Add-on Template dropdown menu, select Create Template . 6. Configuring CLI Add-on Template: Enter the following information in the template: Template Name: Default-Route-Propagation Description: Default Route Propagation In the CLI configuration box, input: router ospf 10 vrf 10 default-information originate Click Save after entering the commands. 7. Applying the Configuration: Click Update , followed by Next , and then Configure Devices . This step applies the configuration across the network. Wait for the confirmation message indicating successful configuration push by vManage and application by cEdge. Result: The default route on VRF/VPN-10 is now configured and propagated from Site-100 across the SD-WAN fabric. Step 4 - Verify Internet Connectivity on VPN-10 of Site-400 Objective: Verify the successful establishment of internet connectivity on VPN-10 for both Site-400 and Site-300 following the configuration changes. 1. Re-launching MTPutty if Needed: If the MTPutty application is not open, launch it again on your RDP session. 2. SSH/Login to cEdges: SSH/Login to Site400-cE1 and Site300-cE1 cEdges by clicking on their respective names in the saved Putty sessions . 3. Verifying the Routing Table: Use the command show ip route vrf 10 to verify the routing table for both nodes (Site300-cE1 and Site400-cE1). Confirm that both nodes are receiving the default route on VRF/VPN-10. 4. Checking Internet Access on Site-400: Log in again to the Ubuntu VM named Site400-Ubuntu-VPN10 using the mRemoteNG application. Launch the Chromium Web Browser on the Ubuntu VM and navigate to an internet site, such as cisco.com . The internet access should now be functioning properly. 5. Testing Connectivity with Ping: Open the Terminal application on the Ubuntu VM. Issue the ping command ping 8.8.8.8 . This time, the ping should be successful, indicating internet connectivity. 6. Performing Traceroute: In the Terminal application on the Ubuntu VM, execute a traceroute with the following command: traceroute 8.8.8.8 . 7. Repeating for Site-300: Repeat the above steps to confirm internet access for VPN-10 of Site300 . This involves verifying the ip route on VPN-10 on Site300-cE1 and then checking internet connectivity on the Ubuntu VM Site300-Ubuntu-VPN10 . Result: Internet connectivity on VPN-10 for Site-400 and Site-300 should now be successfully established and verifiable through the above tests.","title":"Task 3 Regional Internet Access for All Sites"},{"location":"Task3-v1/#task-3-internet-access-for-all-sites","text":"In this task, our primary goal is to enable internet access for VPN-10 at Site-100. We will achieve this by routing the VPN-10 traffic through the Global Routing Table. The process involves a series of structured steps: 1. Enabling Internet Access for VPN-10 on Site-100: We will start by configuring Site-100 to allow VPN-10 traffic to access the internet through the Global Routing Table. This is a crucial step in ensuring that Site-100 can serve as a gateway for internet access. 2. Propagating the Default Route: The next significant step is to propagate a default route from Site-100 to other sites within the network (specifically Site-400 and Site-300) that are also on VPN-10. By doing this, we essentially enable Site-400 and Site-300 to use Site-100 as their default gateway on VPN-10. 3. Routing Internet Traffic via Site-100: Consequently, both Site-400 and Site-300 will begin routing their internet traffic through Site-100. This is achieved by efficiently utilizing the SD-WAN Fabric, which facilitates the traffic flow between these sites. 4. Verification and Testing: Throughout the task, we will conduct a series of verifications and tests. These are designed to ensure that each step is successfully implemented and that internet connectivity is reliably established across the sites on VPN-10. By the end of this task, we will have established a streamlined and efficient routing mechanism that leverages Site-100 as a pivotal access point for internet connectivity for VPN-10 across multiple sites.","title":"Task 3 - Internet Access for All Sites"},{"location":"Task3-v1/#step-1-verify-no-internet-access-on-vpn-10-of-site-400-and-site-300","text":"Objective: Confirm that there is currently no internet access on VPN-10 for both Site-400 and Site-300. 1. Launching mRemoteNG: On your RDP session, open the mRemoteNG application. This application provides access to the console of all Ubuntu machines (Virtual Machines/hosts) on the respective LANs (VPNs) of the SD-WAN sites. 2. Accessing Site-400's VM: In the mRemoteNG application, under VNC Sessions , click on Site400-Ubuntu-VPN10 . This VM is located on the VPN-10 (LAN segment) of Site-400. 3. Logging into the Ubuntu VM: If the console is locked, click on the console screen. Use the following credentials to log in: Username: ubuntu Password: viptela 4. Testing Internet Browser Access: On the Ubuntu desktop, click on the Chromium Web Browser icon to launch it. Try accessing an internet website, such as cisco.com . The access should fail, indicating no internet connectivity. 5. Testing Network Connectivity: Open the Terminal application by clicking its icon on the desktop. In the Terminal, execute ping 8.8.8.8 and press Ctrl+C after a few seconds to stop the ping. A failed ping with 100% packet loss indicates no internet access. 6. Repeating the Process for Site-300: Use mRemoteNG to access the console of Site300-Ubuntu-VPN10 . Repeat the steps to verify the absence of internet access on this VM as well.","title":"Step 1 \u2013 Verify No Internet Access on VPN-10 of Site-400 and Site-300"},{"location":"Task3-v1/#step-2-enable-internet-on-vpn-10-of-site-100","text":"Objective: Route traffic from VPN-10 on Site-100 to the Global Routing Table (GRT), also known as VPN-0, to enable internet access. 1. Launching MTPutty: Start the MTPutty application. You can find it either on the Desktop or in the Taskbar of your RDP session (Jumphost). 2. Accessing Site-400 cEdge: Use MTPutty to SSH into Site400-cE1 cEdge. Select the saved Putty session for Site400-cE1. When prompted, enter the following credentials: Username: admin Password: admin 3. Verifying the Routing Table: Execute the command show ip route vrf 10 to check the routing table. Confirm that there is no default route in VRF-10. 4. Configuring Default Route on Site100-cE1: Now, let's add a default route in VPN-10 pointing to VPN-0 on the Site100-cE1 node. This is done by modifying the Feature Template for VPN-10 in the vManage GUI. 5. Editing Feature Template in vManage: Navigate to Configuration > Templates on vManage. Click on the Feature Templates tab. Use the search bar to find the template named VPN_10_05-09-2022_17-18-00_vedge-C8000V_1201 . Click the three dots ... beside the template and select Edit . 6. Adding IPv4 Route: On the editing page, click on IPv4 Route . Perform the following configurations in the IPv4 Route section: Click New IPv4 Route . Enter 0.0.0.0/0 in Prefix . Select VPN in Gateway . Choose Global from the dropdown menu in Enable VPN . Set Enable VPN to On . Click Add and then Update to save the changes. 7. Applying the Configuration: Click Next to proceed with the configuration. Select Configure Devices to push the configuration from vManage to the cEdge device. Wait and confirm that the configuration push from vManage to the cEdge device is successful. Result: By completing these steps, VPN-10 on Site-100 will be configured to route its internet traffic through the Global Routing Table (VPN-0), enabling internet access.","title":"Step 2 - Enable Internet on VPN-10 of Site-100"},{"location":"Task3-v1/#step-3-default-route-propagation-from-site-100-on-vpn-10","text":"Objective: Propagate the default route from Site-100 to other sites over the SD-WAN Fabric, following the configuration of VPN-10 traffic routing to the Global Routing Table (VPN-0) on Site100-cE1. 1. Navigating in vManage: In vManage, go to Configuration > Templates . 2. Accessing Device Templates: Click on the Device Templates tab. 3. Editing Site-100 Device Template: Find Site-100 Device Template and click on the three dots ( ... ) at the right side of it. 4. Working with Additional Templates: Click on Additional Templates . 5. Creating a CLI Add-on Template: From the CLI Add-on Template dropdown menu, select Create Template . 6. Configuring CLI Add-on Template: Enter the following information in the template: Template Name: Default-Route-Propagation Description: Default Route Propagation In the CLI configuration box, input: router ospf 10 vrf 10 default-information originate Click Save after entering the commands. 7. Applying the Configuration: Click Update , followed by Next , and then Configure Devices . This step applies the configuration across the network. Wait for the confirmation message indicating successful configuration push by vManage and application by cEdge. Result: The default route on VRF/VPN-10 is now configured and propagated from Site-100 across the SD-WAN fabric.","title":"Step 3 - Default Route Propagation from Site-100 on VPN-10"},{"location":"Task3-v1/#step-4-verify-internet-connectivity-on-vpn-10-of-site-400","text":"Objective: Verify the successful establishment of internet connectivity on VPN-10 for both Site-400 and Site-300 following the configuration changes. 1. Re-launching MTPutty if Needed: If the MTPutty application is not open, launch it again on your RDP session. 2. SSH/Login to cEdges: SSH/Login to Site400-cE1 and Site300-cE1 cEdges by clicking on their respective names in the saved Putty sessions . 3. Verifying the Routing Table: Use the command show ip route vrf 10 to verify the routing table for both nodes (Site300-cE1 and Site400-cE1). Confirm that both nodes are receiving the default route on VRF/VPN-10. 4. Checking Internet Access on Site-400: Log in again to the Ubuntu VM named Site400-Ubuntu-VPN10 using the mRemoteNG application. Launch the Chromium Web Browser on the Ubuntu VM and navigate to an internet site, such as cisco.com . The internet access should now be functioning properly. 5. Testing Connectivity with Ping: Open the Terminal application on the Ubuntu VM. Issue the ping command ping 8.8.8.8 . This time, the ping should be successful, indicating internet connectivity. 6. Performing Traceroute: In the Terminal application on the Ubuntu VM, execute a traceroute with the following command: traceroute 8.8.8.8 . 7. Repeating for Site-300: Repeat the above steps to confirm internet access for VPN-10 of Site300 . This involves verifying the ip route on VPN-10 on Site300-cE1 and then checking internet connectivity on the Ubuntu VM Site300-Ubuntu-VPN10 . Result: Internet connectivity on VPN-10 for Site-400 and Site-300 should now be successfully established and verifiable through the above tests.","title":"Step 4 - Verify Internet Connectivity on VPN-10 of Site-400"},{"location":"Task4-v1/","text":"Task 4 - Direct Internet Access for Site-300 In this task, we will enable local Direct Internet Access (DIA) for Site-300. The configuration will route traffic on VPN-10 through this DIA setup. Implementing DIA at Site-300 is a strategic step towards enhancing network security. It will facilitate the setup of IPSec tunnels between Site-300 and the Umbrella Cloud, providing robust security measures from the Umbrella Cloud services. The detailed configuration of IPSec tunnels and their connectivity will be covered in a subsequent task. Step 1 - Enable DIA on Site-300 on VPN-10 Objective: Add a default route in VPN-10 pointing to VPN-0 (Global Routing Table) on the node Site300-cE1 by modifying the VPN-10 template in vManage. 1. Navigating in vManage: On vManage, navigate to Configuration > Templates . 2. Accessing Feature Templates: Click on the Feature Templates tab. 3. Searching for the Template: Use the search bar to find the template name vpn_10_site300_ce1 . 4. Editing the Template: Find the template and click on the three dots ... on the right side, then select Edit . 5. Configuring IPv4 Route: Click on IPv4 Route . In the IPv4 Route section, perform the following configurations: Click on New IP Route . In Prefix : 0.0.0.0/0 In Gateway : VPN In Enable VPN , select Global from the dropdown menu. Set Enable VPN to On , click Add , then Update . 6. Applying Configuration Changes: Click Next . Click Configure Devices to push the configuration from vManage towards cEdge. Wait and verify that the Config-Push from vManage to cEdge device is successful. Step 2 - Verify Internet Connectivity on Site-300 Objective: Verify Internet connectivity on Site-300 VPN-10 following the successful configuration in the previous step. 1. Launching MTPutty (if needed): Launch MTPutty application on your RDP session (Jumphost) if it is not already open. 2. SSH to Site-300 cEdge: Open MTPutty and SSH/login to Site300-cE1 cEdge. Verify VPN-10's routing table for a default route using show ip route vrf 10 . 3. Verifying Default Route on Global Routing Table: Confirm the default route in the Global Routing Table (VPN-0) using show ip route . It will point to 10.2.6.1 and 10.1.6.1 4. Testing Connectivity on Ubuntu VM: Using mRemoteNG , access Site300-Ubuntu-VPN10 VM Launch Terminal application on this VM and then initiate ping 8.8.8.8 . The ping should be successful. Perform a traceroute using the command traceroute 8.8.8.8 . Launch Chromium Web browser and verify Internet access by navigating to www.cisco.com or another website. Step 3 - Internet Connectivity on other VPNs Objective: Confirm that only Site300 VPN-10 has Direct Internet Access, while other VPNs like VPN-12 lack internet connectivity. Test internet connectivity on Site300-Ubuntu-VPN12 using mRemoteNG . Perform ping tests and attempt web browsing from the Ubuntu VM on VPN-12, which should fail, indicating no internet access. Conclusion: Upon successful completion of Task 4, Site-300 has now Direct Internet Access enabled, directing VPN-10 traffic through this newly established route. This pivotal configuration lays the groundwork for future enhancements, particularly in terms of network security through the integration with Umbrella Cloud. The foundation is now set for the next phase, which involves setting up and configuring IPSec tunnels to further secure the network infrastructure.","title":"Task 4 Direct Internet Access for Site300"},{"location":"Task4-v1/#task-4-direct-internet-access-for-site-300","text":"In this task, we will enable local Direct Internet Access (DIA) for Site-300. The configuration will route traffic on VPN-10 through this DIA setup. Implementing DIA at Site-300 is a strategic step towards enhancing network security. It will facilitate the setup of IPSec tunnels between Site-300 and the Umbrella Cloud, providing robust security measures from the Umbrella Cloud services. The detailed configuration of IPSec tunnels and their connectivity will be covered in a subsequent task.","title":"Task 4 - Direct Internet Access for Site-300"},{"location":"Task4-v1/#step-1-enable-dia-on-site-300-on-vpn-10","text":"Objective: Add a default route in VPN-10 pointing to VPN-0 (Global Routing Table) on the node Site300-cE1 by modifying the VPN-10 template in vManage. 1. Navigating in vManage: On vManage, navigate to Configuration > Templates . 2. Accessing Feature Templates: Click on the Feature Templates tab. 3. Searching for the Template: Use the search bar to find the template name vpn_10_site300_ce1 . 4. Editing the Template: Find the template and click on the three dots ... on the right side, then select Edit . 5. Configuring IPv4 Route: Click on IPv4 Route . In the IPv4 Route section, perform the following configurations: Click on New IP Route . In Prefix : 0.0.0.0/0 In Gateway : VPN In Enable VPN , select Global from the dropdown menu. Set Enable VPN to On , click Add , then Update . 6. Applying Configuration Changes: Click Next . Click Configure Devices to push the configuration from vManage towards cEdge. Wait and verify that the Config-Push from vManage to cEdge device is successful.","title":"Step 1 - Enable DIA on Site-300 on VPN-10"},{"location":"Task4-v1/#step-2-verify-internet-connectivity-on-site-300","text":"Objective: Verify Internet connectivity on Site-300 VPN-10 following the successful configuration in the previous step. 1. Launching MTPutty (if needed): Launch MTPutty application on your RDP session (Jumphost) if it is not already open. 2. SSH to Site-300 cEdge: Open MTPutty and SSH/login to Site300-cE1 cEdge. Verify VPN-10's routing table for a default route using show ip route vrf 10 . 3. Verifying Default Route on Global Routing Table: Confirm the default route in the Global Routing Table (VPN-0) using show ip route . It will point to 10.2.6.1 and 10.1.6.1 4. Testing Connectivity on Ubuntu VM: Using mRemoteNG , access Site300-Ubuntu-VPN10 VM Launch Terminal application on this VM and then initiate ping 8.8.8.8 . The ping should be successful. Perform a traceroute using the command traceroute 8.8.8.8 . Launch Chromium Web browser and verify Internet access by navigating to www.cisco.com or another website.","title":"Step 2 - Verify Internet Connectivity on Site-300"},{"location":"Task4-v1/#step-3-internet-connectivity-on-other-vpns","text":"Objective: Confirm that only Site300 VPN-10 has Direct Internet Access, while other VPNs like VPN-12 lack internet connectivity. Test internet connectivity on Site300-Ubuntu-VPN12 using mRemoteNG . Perform ping tests and attempt web browsing from the Ubuntu VM on VPN-12, which should fail, indicating no internet access. Conclusion: Upon successful completion of Task 4, Site-300 has now Direct Internet Access enabled, directing VPN-10 traffic through this newly established route. This pivotal configuration lays the groundwork for future enhancements, particularly in terms of network security through the integration with Umbrella Cloud. The foundation is now set for the next phase, which involves setting up and configuring IPSec tunnels to further secure the network infrastructure.","title":"Step 3 - Internet Connectivity on other VPNs"},{"location":"Task5-v1/","text":"Task 5: Umbrella integration with Site-300 In Task 5, we focus on integrating Site-300 with Cisco Umbrella. This integration is a crucial step in enhancing the network's security posture. By establishing this connection, Site-300 will form both active IPSec tunnels with the Umbrella cloud. As a result, IP traffic from Site-300, particularly for VPN-10, will be routed through Umbrella, allowing for external access (such as Public Cloud, SaaS applications, and the Public Internet) while leveraging Umbrella's security services. This integration not only ensures more secure internet access but also paves the way for future enhancements, including the monitoring and enforcement of security capabilities directly from the Umbrella cloud. Step 1 - Umbrella Organization ID Objective: Obtain the Umbrella Organization ID (Org ID) necessary for integrating Umbrella with Cisco SD-WAN. 1. Accessing the Umbrella Dashboard: Log in to the Umbrella Dashboard on the RDP session (jumphost) by clicking the Umbrella SSO bookmark in Google Chrome Browser. This will automatically open the Umbrella dashboard using single-sign-on. Note: Click through any security warning to ignore the certificate if prompted. 2. Extracting the Org ID: The Umbrella organization (Org) is a distinct entity with its own dashboard. The Org ID is a unique number used to identify each organization and is essential for integrating Umbrella with Cisco SD-WAN. Once logged into the Umbrella dashboard, extract the [Org ID] from the URL in the address bar. The Org ID appears in the following format: https://dashboard.umbrella.com/o/[Org ID]/#/... Here is an example to illustrate where the Org ID is located in the URL: Important: The Org ID is required for later configuration steps in vManage for Umbrella SIG integration. Step 2 - Umbrella API Key Objective: Generate an API token (Key, Secret) from the Umbrella dashboard for use in SD-WAN (vManage) configurations. 1. Navigating to API Keys Page: After logging into the Umbrella dashboard, navigate to Admin > API Keys . Then click on Legacy Keys . 2. Generating API Token: Select Umbrella Management and then click on Generate Token to create an API Key and Secret . 3. Saving API Credentials: Copy both the Key and Secret to a notepad for later use. Important Note: Ensure to copy both the Key and Secret as they are displayed only once and will not be visible again. Step 3 - Update SIG Feature Template on vManage Objective: Add the Umbrella API credentials (Key, Secret) and Org ID in the vManage configurations to automate IPSec tunnel configurations. 1. Accessing Feature Templates in vManage: In vManage, navigate to Configuration > Templates . Click on the Feature Templates tab. 2. Editing the SIG Feature Template: Type sig in the search bar and find the template named VIP23-SIG-Feature-Template . Click the three dots ( ... ) at the right side of this template and select Edit . 3. Creating Cisco SIG Credentials Template: Click on \"Click here to create - Cisco SIG Credentials Template\" . Enter the Umbrella Org ID , Key , and Secret previously saved. 4. Saving and Updating Template: Click Save and then Update at the bottom of the page to save the changes. After successfully saving the Umbrella API Token credentials, the next step will involve applying this Feature template to the Site300-cE1 Device template, enabling the establishment of IPSec tunnels between Umbrella SIG and Site300-cE1. Step 4 - Apply SIG Feature Template on vManage Objective: Apply the previously saved SIG template to the Site300-cE1 device for Umbrella SIG integration, which includes setting up IPSec tunnels between Site300 and the Umbrella cloud. 1. Navigating to Device Templates in vManage: In vManage, go to Configuration > Templates and then click on Device Templates . 2. Editing Site300-cE1 Device Template: Search for the Site300-cE1 device in the Description field. Click on the three dots ( ... ) at the right side of Site300-cE1 and select Edit . 3. Accessing Transport and Management VPN Section: Once the Device Template is open, click on the Transport and Management VPN to navigate to that section. 4. Adding Cisco Secure Internet Gateway Template: Click on Cisco Secure Internet Gateway to add this template to the device. After adding it, select VIP23-SIG-Feature-Template from the drop-down menu. 5. Confirming Cisco SIG Credentials: Scroll down to the Additional Templates section. Ensure that the Cisco SIG Credentials are set to Cisco-Umbrella-Global-Credentials . 6. Updating and Configuring Device Template: Click Update on this page. Then click Next to proceed with the configuration. Click Configure Devices at the bottom of the page to push the configuration from vManage to the cEdge device. 7. Verifying Configuration Success: Wait and verify that the Config-Push from vManage to the cEdge device is successful Result: Upon completion, the IPSec tunnels for integrating Site-300 cEdge with the Umbrella cloud are now configured. Step 5 - Verify SIG Tunnels Objective: Confirm that the IPSec tunnels between the Umbrella cloud and SD-WAN Site-300 are operational. 1. Accessing the Umbrella Dashboard: If not already open, launch Google Chrome on the RDP session and click on the Umbrella SSO bookmark to open the Umbrella dashboard. 2. Navigating to Network Tunnels: Once logged in to the Umbrella Dashboard, go to Deployments > Core Identities > Network Tunnels . 3. Checking Tunnel Status: Initially, the tunnels might be in the Unestablished Tunnels state. It may take a few minutes for the tunnels to become Active . Check for the presence of 2 Active Tunnels . 4. Verifying Protection on Ubuntu VM: Using the mRemoteNG application, launch a console session for the Site300-Ubuntu-VPN10 VM. Inside the VM, open the Web Browser and navigate to welcome.umbrella.com . This step is to verify if Site-300 is protected by Umbrella. 5. Understanding the Failure: The failure occurred because the traffic from the SD-WAN site is still being routed through the normal interface, not through the IPSec tunnels. To address this, we need to create a Service Route to redirect traffic from the SD-WAN site towards the Umbrella Cloud on newly created IPSec tunnels. This action will be covered in the next step. Step 6 - Redirect Traffic to SIG Tunnels Objective: Create a Service Route to SIG for redirecting traffic from VPN-10 on Site-300 towards the Umbrella cloud. 1. Accessing Feature Templates in vManage: Navigate to Configuration > Templates in vManage, and then click on Feature Templates . 2. Edit the VPN-10 Site300 Template: Type vpn_10_site300_ce1 in the search bar. From the search results, locate this template. Click the three dots ( ... ) on the right side of this template and select Edit . 3. Configuring Service Route: On the template editing page, click on Service Route . Click on New Service Route . Add a route with the following settings: Prefix : 0.0.0.0/0 Service : SIG (default setting) Click Add and then Update at the bottom of the page. 4. Applying the Configuration: Click Next and then Configure Devices to push the configuration. Wait and verify that the Config-Push from vManage to the cEdge device is successful. 5. Verifying Traffic Redirection to Umbrella: Using mRemoteNG , relaunch the console session of the Ubuntu VM Site300-Ubuntu-VPN10 . Open the Chromium Web Browser on this VM and navigate to welcome.umbrella.com . The message Welcome to Umbrella indicates successful protection by Umbrella. 6. Checking Traffic Routing: In the console session of the Ubuntu VM Site300-Ubuntu-VPN10 , run the command: traceroute 8.8.8.8 Observe the differences in the traceroute output compared to the earlier task. Consider the hop count and other routing details.","title":"Task 5 Umbrella (SIG) for Site300"},{"location":"Task5-v1/#task-5-umbrella-integration-with-site-300","text":"In Task 5, we focus on integrating Site-300 with Cisco Umbrella. This integration is a crucial step in enhancing the network's security posture. By establishing this connection, Site-300 will form both active IPSec tunnels with the Umbrella cloud. As a result, IP traffic from Site-300, particularly for VPN-10, will be routed through Umbrella, allowing for external access (such as Public Cloud, SaaS applications, and the Public Internet) while leveraging Umbrella's security services. This integration not only ensures more secure internet access but also paves the way for future enhancements, including the monitoring and enforcement of security capabilities directly from the Umbrella cloud.","title":"Task 5: Umbrella integration with Site-300"},{"location":"Task5-v1/#step-1-umbrella-organization-id","text":"Objective: Obtain the Umbrella Organization ID (Org ID) necessary for integrating Umbrella with Cisco SD-WAN. 1. Accessing the Umbrella Dashboard: Log in to the Umbrella Dashboard on the RDP session (jumphost) by clicking the Umbrella SSO bookmark in Google Chrome Browser. This will automatically open the Umbrella dashboard using single-sign-on. Note: Click through any security warning to ignore the certificate if prompted. 2. Extracting the Org ID: The Umbrella organization (Org) is a distinct entity with its own dashboard. The Org ID is a unique number used to identify each organization and is essential for integrating Umbrella with Cisco SD-WAN. Once logged into the Umbrella dashboard, extract the [Org ID] from the URL in the address bar. The Org ID appears in the following format: https://dashboard.umbrella.com/o/[Org ID]/#/... Here is an example to illustrate where the Org ID is located in the URL: Important: The Org ID is required for later configuration steps in vManage for Umbrella SIG integration.","title":"Step 1 - Umbrella Organization ID"},{"location":"Task5-v1/#step-2-umbrella-api-key","text":"Objective: Generate an API token (Key, Secret) from the Umbrella dashboard for use in SD-WAN (vManage) configurations. 1. Navigating to API Keys Page: After logging into the Umbrella dashboard, navigate to Admin > API Keys . Then click on Legacy Keys . 2. Generating API Token: Select Umbrella Management and then click on Generate Token to create an API Key and Secret . 3. Saving API Credentials: Copy both the Key and Secret to a notepad for later use. Important Note: Ensure to copy both the Key and Secret as they are displayed only once and will not be visible again.","title":"Step 2 - Umbrella API Key"},{"location":"Task5-v1/#step-3-update-sig-feature-template-on-vmanage","text":"Objective: Add the Umbrella API credentials (Key, Secret) and Org ID in the vManage configurations to automate IPSec tunnel configurations. 1. Accessing Feature Templates in vManage: In vManage, navigate to Configuration > Templates . Click on the Feature Templates tab. 2. Editing the SIG Feature Template: Type sig in the search bar and find the template named VIP23-SIG-Feature-Template . Click the three dots ( ... ) at the right side of this template and select Edit . 3. Creating Cisco SIG Credentials Template: Click on \"Click here to create - Cisco SIG Credentials Template\" . Enter the Umbrella Org ID , Key , and Secret previously saved. 4. Saving and Updating Template: Click Save and then Update at the bottom of the page to save the changes. After successfully saving the Umbrella API Token credentials, the next step will involve applying this Feature template to the Site300-cE1 Device template, enabling the establishment of IPSec tunnels between Umbrella SIG and Site300-cE1.","title":"Step 3 - Update SIG Feature Template on vManage"},{"location":"Task5-v1/#step-4-apply-sig-feature-template-on-vmanage","text":"Objective: Apply the previously saved SIG template to the Site300-cE1 device for Umbrella SIG integration, which includes setting up IPSec tunnels between Site300 and the Umbrella cloud. 1. Navigating to Device Templates in vManage: In vManage, go to Configuration > Templates and then click on Device Templates . 2. Editing Site300-cE1 Device Template: Search for the Site300-cE1 device in the Description field. Click on the three dots ( ... ) at the right side of Site300-cE1 and select Edit . 3. Accessing Transport and Management VPN Section: Once the Device Template is open, click on the Transport and Management VPN to navigate to that section. 4. Adding Cisco Secure Internet Gateway Template: Click on Cisco Secure Internet Gateway to add this template to the device. After adding it, select VIP23-SIG-Feature-Template from the drop-down menu. 5. Confirming Cisco SIG Credentials: Scroll down to the Additional Templates section. Ensure that the Cisco SIG Credentials are set to Cisco-Umbrella-Global-Credentials . 6. Updating and Configuring Device Template: Click Update on this page. Then click Next to proceed with the configuration. Click Configure Devices at the bottom of the page to push the configuration from vManage to the cEdge device. 7. Verifying Configuration Success: Wait and verify that the Config-Push from vManage to the cEdge device is successful Result: Upon completion, the IPSec tunnels for integrating Site-300 cEdge with the Umbrella cloud are now configured.","title":"Step 4 - Apply SIG Feature Template on vManage"},{"location":"Task5-v1/#step-5-verify-sig-tunnels","text":"Objective: Confirm that the IPSec tunnels between the Umbrella cloud and SD-WAN Site-300 are operational. 1. Accessing the Umbrella Dashboard: If not already open, launch Google Chrome on the RDP session and click on the Umbrella SSO bookmark to open the Umbrella dashboard. 2. Navigating to Network Tunnels: Once logged in to the Umbrella Dashboard, go to Deployments > Core Identities > Network Tunnels . 3. Checking Tunnel Status: Initially, the tunnels might be in the Unestablished Tunnels state. It may take a few minutes for the tunnels to become Active . Check for the presence of 2 Active Tunnels . 4. Verifying Protection on Ubuntu VM: Using the mRemoteNG application, launch a console session for the Site300-Ubuntu-VPN10 VM. Inside the VM, open the Web Browser and navigate to welcome.umbrella.com . This step is to verify if Site-300 is protected by Umbrella. 5. Understanding the Failure: The failure occurred because the traffic from the SD-WAN site is still being routed through the normal interface, not through the IPSec tunnels. To address this, we need to create a Service Route to redirect traffic from the SD-WAN site towards the Umbrella Cloud on newly created IPSec tunnels. This action will be covered in the next step.","title":"Step 5 - Verify SIG Tunnels"},{"location":"Task5-v1/#step-6-redirect-traffic-to-sig-tunnels","text":"Objective: Create a Service Route to SIG for redirecting traffic from VPN-10 on Site-300 towards the Umbrella cloud. 1. Accessing Feature Templates in vManage: Navigate to Configuration > Templates in vManage, and then click on Feature Templates . 2. Edit the VPN-10 Site300 Template: Type vpn_10_site300_ce1 in the search bar. From the search results, locate this template. Click the three dots ( ... ) on the right side of this template and select Edit . 3. Configuring Service Route: On the template editing page, click on Service Route . Click on New Service Route . Add a route with the following settings: Prefix : 0.0.0.0/0 Service : SIG (default setting) Click Add and then Update at the bottom of the page. 4. Applying the Configuration: Click Next and then Configure Devices to push the configuration. Wait and verify that the Config-Push from vManage to the cEdge device is successful. 5. Verifying Traffic Redirection to Umbrella: Using mRemoteNG , relaunch the console session of the Ubuntu VM Site300-Ubuntu-VPN10 . Open the Chromium Web Browser on this VM and navigate to welcome.umbrella.com . The message Welcome to Umbrella indicates successful protection by Umbrella. 6. Checking Traffic Routing: In the console session of the Ubuntu VM Site300-Ubuntu-VPN10 , run the command: traceroute 8.8.8.8 Observe the differences in the traceroute output compared to the earlier task. Consider the hop count and other routing details.","title":"Step 6 - Redirect Traffic to SIG Tunnels"},{"location":"Task6-v1/","text":"Task 6: Umbrella Policy for Site-300 Introduction: In Task 6, we aim to create specific Umbrella Policies for Site-300. These policies will include: Using a Firewall Policy on Umbrella to block ICMP traffic to Google's IP address 8.8.8.8 . Using a Web Policy on Umbrella to block web traffic to social media websites, specifically Facebook. Step 1 - Firewall Policy Objective: Configure a Firewall Policy on the Umbrella Dashboard to block ICMP traffic. 1. Accessing the Umbrella Dashboard: Log in to the Umbrella Dashboard via the Umbrella SSO bookmark in Google Chrome on the RDP session (jumphost). 2. Creating the Firewall Rule: Go to Policies > Management > Firewall Policy and click Add . Create a Rule Name of Block ICMP Google . Select Block under Rule Action . Choose ICMP under Rule Criteria > Protocol . Under Destinations , select Specify IP and enter the CIDR IP Address 8.8.8.8 and Click Add Under Logging toggle the Logging Enabled to turn it on and then Save the policy. Step 2 - Web Policy Objective: Set up an Umbrella Web Policy to block access to Facebook. 1. Creating Web Policy: Navigate to Policies > Management > Web Policy and click Add on the top right page: Click ADD RULE under Ruleset Rules . Name the rule Block Facebook . The default action is Block . Then click Add Identity . On the IDENTITIES page, scroll down, select the Network Tunnels and hit Apply as shown in below screenshot. This will result in selecting the two network tunnels between Umbrella cloud and SD-WAN Site-300: Click Add Destination for this new rule: Click on Application Settings (on the right side at the right arrow > ), then Scroll down to Social Networking and Click on the right arrow > of the Social Networking . Next, select Facebook and Facebook Messenger and hit Apply On the main Rule screen, Click Save at the right side of the newly created Rule: Click three dots ( ... ) and then Enable Rule Confirm by clicking Update Under Ruleset Settings , go to the Ruleset Identities section and click Edit Select Tunnels under All Identities and click Save Under Ruleset Settings , go to the HTTPS Inspection section and click Edit Select Enable HTTPS Inspection , then Save Scroll down and click Close Step 3 - Web Policy Tester Objective: Test the newly created Web policies using Umbrella's \"Policy Tester\". 1. Testing Web Policy: Go to Policies > Management > Web Policy and click Policy Tester at top right page. On the Web Policy Tester page, Under the Primary Identity search box type Site and then select any of the tunnels for Site300 Under Destination , enter facebook.com Then click Run Test button: Observe the test results showing the Ruleset and rule match. Explore the Web Policy Tester further by testing traffic to different destination website such as cisco.com , google.com . Step 4 - Verify Policies Objective: Validate the impact of both Firewall and Web Policies on SD-WAN Site-300. 1. Validating Traffic Redirection: Launch console access to ubuntu Site300-Ubuntu-VPN10 host by using mRemoteNG application. Access welcome.umbrella.com on this ubuntu host to confirm traffic redirection. green check mark should appear, confirming that traffic from VPN 10 is being successfully redirected to Umbrella. 2. Confirming Web Policy Enforcement: Verify Firewall policy enforcement on Umbrella by launching the Terminal application on this Site300-Ubuntu-VPN10 VM/host. As per our policy ICMP traffic to 8.8.8.8 should be blocked now. On the Terminal application execute ping 8.8.8.8 command. Use Ctrl+C to stop the ping after few seconds. This ping should fail (as expected). On the Terminal application execute ping 1.1.1.1 command. Use Ctrl+C to stop the ping. This ping should work (as expected). Verify Web Policy by using Chromium Web Browser on Site300-Ubuntu-VPN10 VM/host. Just like previous step, use the console of this VM/host by using mRemoteNG application to launch Chromium Web Browser: On Chromium to navigate to www.cisco.com . Access to this website should work. Use Chromium to navigate to cnn.com . Access to this website should work. Use Chromium to navigate onto www.facebook.com . As per our Umbrella Web Policy, this site should be blocked and, as expected, Cisco Umbrella block page will appear. Step 5 - Block Sites Using Destination List Objective: Create a custom destination list to block specific sites. 1. Creating and Applying Custom Block List: Navigate to Policy > Policy Component > Destination Lists and Click Add on the top right corner to add a new list. Enter Name : Custom Block List On Destination List Type select Web Policy from the dropdown menu In the Destinations field, enter cnn.com and then click Add as shown below: Verify cnn.com is added and Click Save : Now Navigate to Policy > Management > Web Policy and expand on RuleSet 1 as shown below: Click Add Rule Enter Rule name : Custom List and click Add Identity Enable Inherit Ruleset Identities and click Apply as shown below: Click on Add Destination and then click on 1 next to Destination Lists Select Custom Block List and then click Apply Click Save to save this new rule Click on 3 Dots ( ... ) on this newly created rule and toggle the Enable Rule button Click Update on the next message 2. Testing the Custom Block List: Using mRemoteNG , relaunch the console session of the Ubuntu VM Site300-Ubuntu-VPN10 Use Chromium Web Browser to validate that traffic to cnn.com is now blocked Repeat the steps to block bbc.com and validate on the same host. Conclusion: Upon completion of Task 6, Site300 is now equipped with robust security measures, thanks to the integration of tailored Umbrella policies. The successful configuration and testing of the Firewall Policy ensure that ICMP traffic to 8.8.8.8 is effectively blocked, enhancing network security. The Web Policy implementation restricts access to social media platforms like Facebook, aligning with the organization's internet usage policies. Additionally, the creation of custom destination lists provides flexibility in managing and securing web traffic. These measures collectively enhance the overall security of Site300, making it resilient against common cyber threats and aligning with organizational security protocols.","title":"Task 6 Umbrella Policy for Site300"},{"location":"Task6-v1/#task-6-umbrella-policy-for-site-300","text":"Introduction: In Task 6, we aim to create specific Umbrella Policies for Site-300. These policies will include: Using a Firewall Policy on Umbrella to block ICMP traffic to Google's IP address 8.8.8.8 . Using a Web Policy on Umbrella to block web traffic to social media websites, specifically Facebook.","title":"Task 6: Umbrella Policy for Site-300"},{"location":"Task6-v1/#step-1-firewall-policy","text":"Objective: Configure a Firewall Policy on the Umbrella Dashboard to block ICMP traffic. 1. Accessing the Umbrella Dashboard: Log in to the Umbrella Dashboard via the Umbrella SSO bookmark in Google Chrome on the RDP session (jumphost). 2. Creating the Firewall Rule: Go to Policies > Management > Firewall Policy and click Add . Create a Rule Name of Block ICMP Google . Select Block under Rule Action . Choose ICMP under Rule Criteria > Protocol . Under Destinations , select Specify IP and enter the CIDR IP Address 8.8.8.8 and Click Add Under Logging toggle the Logging Enabled to turn it on and then Save the policy.","title":"Step 1 - Firewall Policy"},{"location":"Task6-v1/#step-2-web-policy","text":"Objective: Set up an Umbrella Web Policy to block access to Facebook. 1. Creating Web Policy: Navigate to Policies > Management > Web Policy and click Add on the top right page: Click ADD RULE under Ruleset Rules . Name the rule Block Facebook . The default action is Block . Then click Add Identity . On the IDENTITIES page, scroll down, select the Network Tunnels and hit Apply as shown in below screenshot. This will result in selecting the two network tunnels between Umbrella cloud and SD-WAN Site-300: Click Add Destination for this new rule: Click on Application Settings (on the right side at the right arrow > ), then Scroll down to Social Networking and Click on the right arrow > of the Social Networking . Next, select Facebook and Facebook Messenger and hit Apply On the main Rule screen, Click Save at the right side of the newly created Rule: Click three dots ( ... ) and then Enable Rule Confirm by clicking Update Under Ruleset Settings , go to the Ruleset Identities section and click Edit Select Tunnels under All Identities and click Save Under Ruleset Settings , go to the HTTPS Inspection section and click Edit Select Enable HTTPS Inspection , then Save Scroll down and click Close","title":"Step 2 - Web Policy"},{"location":"Task6-v1/#step-3-web-policy-tester","text":"Objective: Test the newly created Web policies using Umbrella's \"Policy Tester\". 1. Testing Web Policy: Go to Policies > Management > Web Policy and click Policy Tester at top right page. On the Web Policy Tester page, Under the Primary Identity search box type Site and then select any of the tunnels for Site300 Under Destination , enter facebook.com Then click Run Test button: Observe the test results showing the Ruleset and rule match. Explore the Web Policy Tester further by testing traffic to different destination website such as cisco.com , google.com .","title":"Step 3 - Web Policy Tester"},{"location":"Task6-v1/#step-4-verify-policies","text":"Objective: Validate the impact of both Firewall and Web Policies on SD-WAN Site-300. 1. Validating Traffic Redirection: Launch console access to ubuntu Site300-Ubuntu-VPN10 host by using mRemoteNG application. Access welcome.umbrella.com on this ubuntu host to confirm traffic redirection. green check mark should appear, confirming that traffic from VPN 10 is being successfully redirected to Umbrella. 2. Confirming Web Policy Enforcement: Verify Firewall policy enforcement on Umbrella by launching the Terminal application on this Site300-Ubuntu-VPN10 VM/host. As per our policy ICMP traffic to 8.8.8.8 should be blocked now. On the Terminal application execute ping 8.8.8.8 command. Use Ctrl+C to stop the ping after few seconds. This ping should fail (as expected). On the Terminal application execute ping 1.1.1.1 command. Use Ctrl+C to stop the ping. This ping should work (as expected). Verify Web Policy by using Chromium Web Browser on Site300-Ubuntu-VPN10 VM/host. Just like previous step, use the console of this VM/host by using mRemoteNG application to launch Chromium Web Browser: On Chromium to navigate to www.cisco.com . Access to this website should work. Use Chromium to navigate to cnn.com . Access to this website should work. Use Chromium to navigate onto www.facebook.com . As per our Umbrella Web Policy, this site should be blocked and, as expected, Cisco Umbrella block page will appear.","title":"Step 4 - Verify Policies"},{"location":"Task6-v1/#step-5-block-sites-using-destination-list","text":"Objective: Create a custom destination list to block specific sites. 1. Creating and Applying Custom Block List: Navigate to Policy > Policy Component > Destination Lists and Click Add on the top right corner to add a new list. Enter Name : Custom Block List On Destination List Type select Web Policy from the dropdown menu In the Destinations field, enter cnn.com and then click Add as shown below: Verify cnn.com is added and Click Save : Now Navigate to Policy > Management > Web Policy and expand on RuleSet 1 as shown below: Click Add Rule Enter Rule name : Custom List and click Add Identity Enable Inherit Ruleset Identities and click Apply as shown below: Click on Add Destination and then click on 1 next to Destination Lists Select Custom Block List and then click Apply Click Save to save this new rule Click on 3 Dots ( ... ) on this newly created rule and toggle the Enable Rule button Click Update on the next message 2. Testing the Custom Block List: Using mRemoteNG , relaunch the console session of the Ubuntu VM Site300-Ubuntu-VPN10 Use Chromium Web Browser to validate that traffic to cnn.com is now blocked Repeat the steps to block bbc.com and validate on the same host. Conclusion: Upon completion of Task 6, Site300 is now equipped with robust security measures, thanks to the integration of tailored Umbrella policies. The successful configuration and testing of the Firewall Policy ensure that ICMP traffic to 8.8.8.8 is effectively blocked, enhancing network security. The Web Policy implementation restricts access to social media platforms like Facebook, aligning with the organization's internet usage policies. Additionally, the creation of custom destination lists provides flexibility in managing and securing web traffic. These measures collectively enhance the overall security of Site300, making it resilient against common cyber threats and aligning with organizational security protocols.","title":"Step 5 - Block Sites Using Destination List"},{"location":"Task7-v1/","text":"Task 7 - Umbrella SIG for Regional sites In this task, Umbrella SIG will be integrated to Site 100 will be performed. This integration will be used to route traffic towards Umbrella and enforce Cloud Security policies for local Site 100 as well as for remote Site 400. Recall that as per IP traffic routing (earlier task) the Internet traffic from Site 400 is also routed via Site 100. Hence Umbrella policies from these sites will also be Step 1 - IPSec Tunnels from Site-100 to Umbrella Objective: Implement the SIG template in VPN-0 on the device template of node Site100-cE1 in the Transport and Management VPN section on vManage. This will result in creating IPSec tunnels between SD-WAN Site-100 and Umbrella Cloud. 1. Accessing Device Templates: Navigate to Configuration > Templates and click on Device Templates in vManage. 2. Editing Site100-cE1 Template: Locate the Site100-cE1 template from the Description field. Then click on three dots ( ... ) on the right hand side and click Edit : 3. Configuring Transport and Management VPN: On the Device Template , Click on Transport and Management VPN . 4. Adding Cisco Secure Internet Gateway Template: Add the Cisco Secure Internet Gateway template by clicking on it, and then select VIP23-SIG-Feature-Template from the dropdown for this template. 5. Ensuring Cisco SIG Credentials: Scroll down to the Additional Templates section and confirm the addition of Cisco SIG Credentials with value of VIP23-SIG-Credentials . 6. Updating and Configuring Devices: Click on Update to modify the settings. Click Next to proceed with the configuration Click Configure Devices on next page Wait for success message for pushing these configuration changes to Site100-cE1. Step 2 - Verify SIG Tunnels on Umbrella Objective: Confirm the operational status of IPSec tunnels to Site100-cE1 by accessing the Umbrella dashboard. 1. Accessing Umbrella Dashboard: Log in to the Umbrella Dashboard via Umbrella SSO on the RDP session. 2. Checking Tunnel Status: Navigate to Deployments > Core Identities > Network Tunnels . Initially, the newly created IPSec tunnels may appear under Unestablished Tunnels . After a few minutes, they should appear as Active Tunnels . Step 3 - Redirect Traffic to SIG Tunnels Objective: Direct VPN-10 traffic from SD-WAN Site-100 via IPSec tunnels towards Umbrella by adding a Service route on vManage. 1. Modifying VPN Template: On the vManage GUI, go to Configuration > Templates > Feature Templates . Search for VPN_10_05-09-2022_17-18-00_vedge-C8000V_1201 and Edit the template. 2. Adding Service Route: Select Service Route . Click New Service Route and add a Prefix of 0.0.0.0/0 pointing to SIG (default). Click Add and then click Update at the bottom of the page 3. Updating and Configuring Device: Click Next and then click Configure Devices Wait till config push is sucessfull to Site100-cE1. Optional: you may SSH to Site100-cE1 by using MTPutty application on RDP session (Jumphost). Validate that the service route command ip sdwan route vrf 10 0.0.0.0/0 service sig are pushed by vManage. 4. Verifying Traffic Redirection to Umbrella: Using mRemoteNG , relaunch the console session of the Ubuntu VM Site400-Ubuntu-VPN10 . Open the Chromium Web Browser on this VM and navigate to welcome.umbrella.com . The message Welcome to Umbrella indicates successful protection by Umbrella. Conclusion: With these configurations, traffic from Site-100 and Site-400 is now routed towards Umbrella using the IPSec tunnels. The next steps will involve configuring Cloud Security policies for these sites on Umbrella.","title":"Task 7 Umbrella SIG policies for Regional Access"},{"location":"Task7-v1/#task-7-umbrella-sig-for-regional-sites","text":"In this task, Umbrella SIG will be integrated to Site 100 will be performed. This integration will be used to route traffic towards Umbrella and enforce Cloud Security policies for local Site 100 as well as for remote Site 400. Recall that as per IP traffic routing (earlier task) the Internet traffic from Site 400 is also routed via Site 100. Hence Umbrella policies from these sites will also be","title":"Task 7 - Umbrella SIG for Regional sites"},{"location":"Task7-v1/#step-1-ipsec-tunnels-from-site-100-to-umbrella","text":"Objective: Implement the SIG template in VPN-0 on the device template of node Site100-cE1 in the Transport and Management VPN section on vManage. This will result in creating IPSec tunnels between SD-WAN Site-100 and Umbrella Cloud. 1. Accessing Device Templates: Navigate to Configuration > Templates and click on Device Templates in vManage. 2. Editing Site100-cE1 Template: Locate the Site100-cE1 template from the Description field. Then click on three dots ( ... ) on the right hand side and click Edit : 3. Configuring Transport and Management VPN: On the Device Template , Click on Transport and Management VPN . 4. Adding Cisco Secure Internet Gateway Template: Add the Cisco Secure Internet Gateway template by clicking on it, and then select VIP23-SIG-Feature-Template from the dropdown for this template. 5. Ensuring Cisco SIG Credentials: Scroll down to the Additional Templates section and confirm the addition of Cisco SIG Credentials with value of VIP23-SIG-Credentials . 6. Updating and Configuring Devices: Click on Update to modify the settings. Click Next to proceed with the configuration Click Configure Devices on next page Wait for success message for pushing these configuration changes to Site100-cE1.","title":"Step 1 - IPSec Tunnels from Site-100 to Umbrella"},{"location":"Task7-v1/#step-2-verify-sig-tunnels-on-umbrella","text":"Objective: Confirm the operational status of IPSec tunnels to Site100-cE1 by accessing the Umbrella dashboard. 1. Accessing Umbrella Dashboard: Log in to the Umbrella Dashboard via Umbrella SSO on the RDP session. 2. Checking Tunnel Status: Navigate to Deployments > Core Identities > Network Tunnels . Initially, the newly created IPSec tunnels may appear under Unestablished Tunnels . After a few minutes, they should appear as Active Tunnels .","title":"Step 2 - Verify SIG Tunnels on Umbrella"},{"location":"Task7-v1/#step-3-redirect-traffic-to-sig-tunnels","text":"Objective: Direct VPN-10 traffic from SD-WAN Site-100 via IPSec tunnels towards Umbrella by adding a Service route on vManage. 1. Modifying VPN Template: On the vManage GUI, go to Configuration > Templates > Feature Templates . Search for VPN_10_05-09-2022_17-18-00_vedge-C8000V_1201 and Edit the template. 2. Adding Service Route: Select Service Route . Click New Service Route and add a Prefix of 0.0.0.0/0 pointing to SIG (default). Click Add and then click Update at the bottom of the page 3. Updating and Configuring Device: Click Next and then click Configure Devices Wait till config push is sucessfull to Site100-cE1. Optional: you may SSH to Site100-cE1 by using MTPutty application on RDP session (Jumphost). Validate that the service route command ip sdwan route vrf 10 0.0.0.0/0 service sig are pushed by vManage. 4. Verifying Traffic Redirection to Umbrella: Using mRemoteNG , relaunch the console session of the Ubuntu VM Site400-Ubuntu-VPN10 . Open the Chromium Web Browser on this VM and navigate to welcome.umbrella.com . The message Welcome to Umbrella indicates successful protection by Umbrella. Conclusion: With these configurations, traffic from Site-100 and Site-400 is now routed towards Umbrella using the IPSec tunnels. The next steps will involve configuring Cloud Security policies for these sites on Umbrella.","title":"Step 3 - Redirect Traffic to SIG Tunnels"},{"location":"Task8-v1/","text":"Task 8 - Umbrella Regional Policies In this task we will create Web Proxy Policies on Umbrella to be enforced on Site-100 and Site-400 (regional sites). These policies will aim to block web traffic to Financial Institutions and other specified websites using custom destination lists. Step 1 - Umbrella Web Policy Objective: Configure an Umbrella Web Policy to block traffic to Financial websites from Site-400 and Site-100. 1. Accessing the Umbrella Dashboard: On the RDP session (jumphost), logon to Umbrella Dashboard by clicking on Google Chrome Browser bookmark named Umbrella SSO . It will open the Umbrella dashboard and auto-login using single-sign-on. 2. Creating the Web Policy: Go to Policies > Management > Web Policy and click Add on the top right to add a new Ruleset as shown in below screenshot: 3. Configuring Ruleset Identities: On the new \" Ruleset Rules \" web page, under Ruleset Settings scroll down to Ruleset identities and Click Edit as shown below: Next on the Ruleset Identities web page, under All Identities scroll down to Tunnels and Click on number 4 with right arrow i.e., 4 > as shown below: On the next page, select the two Tunnels for SITE100 and Click SAVE button as shown below: Note: Select only SITE100 tunnels. Do not select SITE300 tunnels in this step. Under the Ruleset Settings , scroll down to HTTPS Inspection section and click Edit : 4. Enabling HTTPS Inspection: Select Enable HTTPS Inspection , then click Save : 5. Adding Web Policy Rule: After adding the identities, Click ADD RULE button. Give the Rule Name of Regional - block Financial and verify the Rule Action is Block : Next click on Add Identity for this rule. Enable Inherit Ruleset Identities and click Apply as shown in below figure: Further on the new rule, click on Add Destination and Click on right arrow > next to Application Settings : Then scroll down to Select Financial Services and hit Apply : On the Rule click on Save icon to save newly added rule as shown in below screenshot: 6. Enabling the Rule: By default newly created rules are disabled. To enable the Rule 1, click three dots ( ... ) at the right side and then toggle Enable Rule as shown in below screenshot. Confirm by clicking Update : Now the rule and ruleset settings are all configured for Regional sites. Scroll down and click Close as shown in below screenshot Step 2 - Create Customs-list Web Policy Objective: Create a custom destination list and a web policy to block specific URLs (as per this custom destination list). 1. Creating Destination List: On Umbrella dashboard, navigate to Policy > Policy Component > Destination lists , click Add on the top right corner: Add this list as per below settings: List Name: Custom-Filter Destination List type: Web Proxy (from drop-down menu) Destination: www.cnn.com Click Add Click Save after adding destination/domain: 2. Adding Rule to Ruleset: Navigate to Policies > Management > Web Policy and expand on RuleSet 2 by clicking on it or by clicking down-arrow: Let's add a new rule by clicking ADD RULE button. Give the Rule Name of Regional - block custom and verify the Rule Action is Block : Next let's also use ruleset identities for this rule. Click on Add Identity for this rule and enable Inherit Ruleset Identities and click Apply as shown in below figure: Further on the new rule, click on Add Destination and CLick on the right arrow > next to Destiniation Lists Select the Custom-Filter and then click on Apply Click on Save on this newly created rule: 3. Enabling the Custom Rule: By default newly created rules are disabled. To enable the Rule 2, click three dots ( ... ) at the right side and then toggle Enable Rule as shown in below screenshot. Confirm by clicking Update : After saving the rule, You may scroll down under Ruleset settings and click on Close button. Now the Umbrella policies for regional sites (site-100 and Site-400) have been configured. Step 3 - Web Policy Tester Objective: Test the newly created Web policies using Umbrella's \"Policy Tester\". 1. Running Policy Tests: On Umbrella Dashboard, navigate to Policies > Management > Web Policy . Click on Policy Tester at the top right corner: On the Web Policy Tester page, Under the Primary Identity search box type Site1 and then select any of the Site100 tunnels Under Destination , enter chase.com Then click Run Test button: The result of this test appears on the page and as expected it shows the Ruleset 2 and rule being matched by the Web policy. Next run a test for any of the Site100 tunnel for below destination: Under Destination , enter www.cnn.com The result of this test appears on the page and as expected it shows the Ruleset 2 and rule being matched by the Web policy. Explore the Web Policy Tester further by testing traffic to different destination website such as cisco.com, google.com for Regional sites traffic. Step 4 - Verify Policies on Hosts Objective: Confirm the effectiveness of the Web Policies on regional site-400 host. 1. Confirming Traffic Redirection: First validate if traffic is being redirected to Umbrella. Using mRemoteNG , relaunch the console session of the Ubuntu VM Site400-Ubuntu-VPN10 . Login with credentials of viptela Use Chromium Browser to navigate to welcome.umbrella.com . A green check mark should appear, confirming that traffic from VPN-10 is being successfully redirected to Umbrella. 2. Validating Web Policy: Verify Web Policy by using Chromium Web Browser on the console of Site400-Ubuntu-VPN10 host by using mRemoteNG application. Use Chromium to navigate onto www.cisco.com . Access to this website should work. Use Chromium to navigate to www.cnn.com . As per our Umbrella Web Policy, this site should be blocked and, as expected, Cisco Umbrella block page will appear. Use Chromium to navigate to www.chase.com . As per our Umbrella Web Policy, this sites should be blocked and, as expected, Cisco Umbrella block page will appear. Use Chromium to navigate to www.bankofamerica.com . As per our Umbrella Web Policy, this sites should be blocked and, as expected, Cisco Umbrella block page will appear. Use Chromium to navigate onto www.facebook.com . Access to this site should work as expected Conclusion: Upon completing Task 8, robust Web Proxy Policies have been successfully established and enforced on regional sites, Site-100 and Site-400. These policies effectively block web traffic to financial institutions and other specific websites as designated in the custom destination lists. Key accomplishments in this task include: The configuration of Umbrella Web Policies to restrict access to financial websites, enhancing the security and compliance posture of the regional sites. The creation of custom destination lists, demonstrating the flexibility of Umbrella to tailor web access policies to the organization's specific needs. Successful testing and validation of these policies using Umbrella's Web Policy Tester, ensuring that the desired web traffic restrictions are in place and functioning as expected. Verification of policy enforcement on regional site hosts, confirming that traffic is appropriately redirected and filtered according to the newly implemented policies. As a result, Site-100 and Site-400 are now equipped with targeted web access controls, contributing significantly to the overall security framework of the organization's network.","title":"Task 8 Umbrella Regional Policies"},{"location":"Task8-v1/#task-8-umbrella-regional-policies","text":"In this task we will create Web Proxy Policies on Umbrella to be enforced on Site-100 and Site-400 (regional sites). These policies will aim to block web traffic to Financial Institutions and other specified websites using custom destination lists.","title":"Task 8 - Umbrella Regional Policies"},{"location":"Task8-v1/#step-1-umbrella-web-policy","text":"Objective: Configure an Umbrella Web Policy to block traffic to Financial websites from Site-400 and Site-100. 1. Accessing the Umbrella Dashboard: On the RDP session (jumphost), logon to Umbrella Dashboard by clicking on Google Chrome Browser bookmark named Umbrella SSO . It will open the Umbrella dashboard and auto-login using single-sign-on. 2. Creating the Web Policy: Go to Policies > Management > Web Policy and click Add on the top right to add a new Ruleset as shown in below screenshot: 3. Configuring Ruleset Identities: On the new \" Ruleset Rules \" web page, under Ruleset Settings scroll down to Ruleset identities and Click Edit as shown below: Next on the Ruleset Identities web page, under All Identities scroll down to Tunnels and Click on number 4 with right arrow i.e., 4 > as shown below: On the next page, select the two Tunnels for SITE100 and Click SAVE button as shown below: Note: Select only SITE100 tunnels. Do not select SITE300 tunnels in this step. Under the Ruleset Settings , scroll down to HTTPS Inspection section and click Edit : 4. Enabling HTTPS Inspection: Select Enable HTTPS Inspection , then click Save : 5. Adding Web Policy Rule: After adding the identities, Click ADD RULE button. Give the Rule Name of Regional - block Financial and verify the Rule Action is Block : Next click on Add Identity for this rule. Enable Inherit Ruleset Identities and click Apply as shown in below figure: Further on the new rule, click on Add Destination and Click on right arrow > next to Application Settings : Then scroll down to Select Financial Services and hit Apply : On the Rule click on Save icon to save newly added rule as shown in below screenshot: 6. Enabling the Rule: By default newly created rules are disabled. To enable the Rule 1, click three dots ( ... ) at the right side and then toggle Enable Rule as shown in below screenshot. Confirm by clicking Update : Now the rule and ruleset settings are all configured for Regional sites. Scroll down and click Close as shown in below screenshot","title":"Step 1 - Umbrella Web Policy"},{"location":"Task8-v1/#step-2-create-customs-list-web-policy","text":"Objective: Create a custom destination list and a web policy to block specific URLs (as per this custom destination list). 1. Creating Destination List: On Umbrella dashboard, navigate to Policy > Policy Component > Destination lists , click Add on the top right corner: Add this list as per below settings: List Name: Custom-Filter Destination List type: Web Proxy (from drop-down menu) Destination: www.cnn.com Click Add Click Save after adding destination/domain: 2. Adding Rule to Ruleset: Navigate to Policies > Management > Web Policy and expand on RuleSet 2 by clicking on it or by clicking down-arrow: Let's add a new rule by clicking ADD RULE button. Give the Rule Name of Regional - block custom and verify the Rule Action is Block : Next let's also use ruleset identities for this rule. Click on Add Identity for this rule and enable Inherit Ruleset Identities and click Apply as shown in below figure: Further on the new rule, click on Add Destination and CLick on the right arrow > next to Destiniation Lists Select the Custom-Filter and then click on Apply Click on Save on this newly created rule: 3. Enabling the Custom Rule: By default newly created rules are disabled. To enable the Rule 2, click three dots ( ... ) at the right side and then toggle Enable Rule as shown in below screenshot. Confirm by clicking Update : After saving the rule, You may scroll down under Ruleset settings and click on Close button. Now the Umbrella policies for regional sites (site-100 and Site-400) have been configured.","title":"Step 2 - Create Customs-list Web Policy"},{"location":"Task8-v1/#step-3-web-policy-tester","text":"Objective: Test the newly created Web policies using Umbrella's \"Policy Tester\". 1. Running Policy Tests: On Umbrella Dashboard, navigate to Policies > Management > Web Policy . Click on Policy Tester at the top right corner: On the Web Policy Tester page, Under the Primary Identity search box type Site1 and then select any of the Site100 tunnels Under Destination , enter chase.com Then click Run Test button: The result of this test appears on the page and as expected it shows the Ruleset 2 and rule being matched by the Web policy. Next run a test for any of the Site100 tunnel for below destination: Under Destination , enter www.cnn.com The result of this test appears on the page and as expected it shows the Ruleset 2 and rule being matched by the Web policy. Explore the Web Policy Tester further by testing traffic to different destination website such as cisco.com, google.com for Regional sites traffic.","title":"Step 3 - Web Policy Tester"},{"location":"Task8-v1/#step-4-verify-policies-on-hosts","text":"Objective: Confirm the effectiveness of the Web Policies on regional site-400 host. 1. Confirming Traffic Redirection: First validate if traffic is being redirected to Umbrella. Using mRemoteNG , relaunch the console session of the Ubuntu VM Site400-Ubuntu-VPN10 . Login with credentials of viptela Use Chromium Browser to navigate to welcome.umbrella.com . A green check mark should appear, confirming that traffic from VPN-10 is being successfully redirected to Umbrella. 2. Validating Web Policy: Verify Web Policy by using Chromium Web Browser on the console of Site400-Ubuntu-VPN10 host by using mRemoteNG application. Use Chromium to navigate onto www.cisco.com . Access to this website should work. Use Chromium to navigate to www.cnn.com . As per our Umbrella Web Policy, this site should be blocked and, as expected, Cisco Umbrella block page will appear. Use Chromium to navigate to www.chase.com . As per our Umbrella Web Policy, this sites should be blocked and, as expected, Cisco Umbrella block page will appear. Use Chromium to navigate to www.bankofamerica.com . As per our Umbrella Web Policy, this sites should be blocked and, as expected, Cisco Umbrella block page will appear. Use Chromium to navigate onto www.facebook.com . Access to this site should work as expected Conclusion: Upon completing Task 8, robust Web Proxy Policies have been successfully established and enforced on regional sites, Site-100 and Site-400. These policies effectively block web traffic to financial institutions and other specific websites as designated in the custom destination lists. Key accomplishments in this task include: The configuration of Umbrella Web Policies to restrict access to financial websites, enhancing the security and compliance posture of the regional sites. The creation of custom destination lists, demonstrating the flexibility of Umbrella to tailor web access policies to the organization's specific needs. Successful testing and validation of these policies using Umbrella's Web Policy Tester, ensuring that the desired web traffic restrictions are in place and functioning as expected. Verification of policy enforcement on regional site hosts, confirming that traffic is appropriately redirected and filtered according to the newly implemented policies. As a result, Site-100 and Site-400 are now equipped with targeted web access controls, contributing significantly to the overall security framework of the organization's network.","title":"Step 4 - Verify Policies on Hosts"},{"location":"Task9-v1/","text":"Task 9 - Monitoring on Umbrella Task 9 is focused on utilizing Cisco Umbrella reports for monitoring usage, traffic detection, policy enforcement, and SD-WAN integration. This task assumes the completion of all prior tasks involving the integration of SD-WAN sites with Umbrella and the configuration of various policies. Step 1: Traffic from SD-WAN sites Objective: Initiate additional IP and Web traffic for Umbrella monitoring. 1. Generating Web and IP Traffic: On the RDP session, use mRemoteNG application to logon the console of VM named Site300-Ubuntu-VPN10 . Launch Chromium web browser and visit the website cisco.com . This website should be accessible. On the Chromium web browser navigate to facebook.com . As per earlier configured policy, the traffic to facebook.com should be blocked by Umbrella on Site-300. On the mRemoteNG application launch the Terminal application in the RDP session of the Site300-Ubuntu-VPN10 . Then initiate ICMP traffic by issuing below ping command. After few seconds stop the ping by pressing Ctrl-C . A 100% success rate in the ping results confirms successful Internet connectivity through Umbrella. ping 1.1.1.1 In the same terminal of the Site300-VPN10 host, execute the command below. After a few seconds, halt the ping by pressing Control-C . According to the previous configuration, Umbrella should block this traffic: ping 8.8.8.8 Next, * On the RDP session, use mRemoteNG application to logon the console of VM named Site400-Ubuntu-VPN10 . From the Chromium Web browser initiate traffic to www.cnn.com and cisco.com . As per earlier task, the traffic to www.cnn.com should be blocked by Umbrella. On the mRemoteNG application launch the Terminal application in the RDP session of the Site400-Ubuntu-VPN10 . Then initiate ICMP traffic by issuing below ping command. After few seconds stop the ping by pressing Ctrl-C . A 100% success rate in the ping results confirms successful Internet connectivity through Umbrella. ping 1.1.1.1 Step 2 - Activity Reports for Web URLs Objective: View web and IP traffic activity reports from SD-WAN branch sites in Umbrella. 1. Accessing Activity Search: On the RDP session (jumphost), access the Umbrella web page by clicking on Umbrella SSO bookmark on Google Chrome browser. Go to Reporting > Core Reports and click on Activity Search : Here you can view the result of every DNS, URL, and IP request from your various SD-WAN sites and other identities. Browse through to view some of the past results. 2. Conducting Advanced Searches: Click on blue Filters button to close the filter tab and then click on Advanced button in the Search field/bar. On the Advanced Search page, navigate to to the URL section and enter cnn.com . Then click Apply as shown in below screenshot: You will now see all the search results matching URL of cnn.com . Below is an example screenshot for these results (your view may be different): As per these search results: Note that the search results shows all Web Requests related to cnn.com i.e., Secure Web Gateway (or Web Proxy) of Umbrella logged these requests. Use the Scroll bar at the bottom to move right and review the various fields such as Action , Categories and Ruleset or Rule fields of the results (each row) shown on this page. Further on the right side of each row, click on the three dots ( ... ) and then click View Full Details to see detailed info as shown in below screenshot: In summary the info in Activty search results matches the configurations performed in earlier tasks! Click on Advanced button in the Search field again. On the Advanced Search page, enter facebook.com as the second URL and click Apply button as shown below: View the updated Activity results. Below screenshot is an example for such result and your data may vary: In the search result, review the various fields such as Action , Categories and Ruleset or Rule fields of the results (each row) shown on this page and verify that results match the configurations performed in earlier tasks. Step 3 - Activity Reports for Firewall Objective: Review Umbrella's monitoring results for Firewall traffic. 1. Reviewing Traffic to Specific IPs: In the Umbrella Dashboard on Google Chrome, clear the existing Advanced Filter by clicking on CLEAR button or click on cross ( X ) next to the URL field on this page. Thus Web filters for cnn.com and facebook.com are cleared from Activity Search page. Alternatively, just navigate back to Reporting > Core Reports > Activity Search . Next, Click on Advanced button in the Search field/bar. On the Advanced Search page, navigate to the IP Address section, enter 1.1.1.1 and hit Apply : Now you can review the search results for all traffic related to IP address of 1.1.1.1 that is detected by Umbrella Firewall (FW). Below is an example of this search result - your result may vary: Next, Clear these search results and remove the filter for 1.1.1.1 . Create a new Advanced Search filter for IP Address of 8.8.8.8 (using the same procedure as above). Revew the search results IP address of 8.8.8.8 . Below is an example of screenshot for this search (note your result may be different). As per Actions field, you will see both Allowed and Blocked . Why do you see both of these actions? Tip: Have a look at details of these packets by clicking on view Full Details and then review the Protocol field (ICMP, UDP)! Step 4 - Top Destinations Reports Objective: Analyze the most active destinations in traffic on the Umbrella Dashboard. 1. Viewing Top Destinations: On Umbrella Dashboard, navgiate to Reporting > Additional Reports > Top Destinations . It will show the most visited destinations. In previous tasks, on Ubuntu Virtual Machines at the SD-WAN sites, you had browsed to various websites. As Ubuntu VM settings the DNS queries will be routed via DNS Resolver with IP address of 1.1.1.1 . Below Figure shows an example screenshot from a lab system. Note: Your screen may not have the same output. Click on 1.1.1.1 among the list of destinations as shown below: 2. Investigating Specific Destinations: Once 1.1.1.1 is clicked it will show below screenshot. Click on VIEW 1.1.1.1 IN INVESTIGATE to view more details of this IP address as shown below The investigate page shows more details about this IP address as shown in below screenshot. Click on Talos to view the reputation and other intelligence from Cisco Talos about this IP address. Here is the screenshot from Cisco Talos about this IP address Optional Step 5 - additional reports Objective: Explore various other reports available on the Umbrella Dashboard. Navigate to Reporting > Additional Request > Top Identities to view the traffic by various Identities. As expected, the Network tunnels (four) will be shown here. Allowed or Blocked Responses by specific Traffic type can also be viewed on this page by clicking under the Responses . You can vew the Tunnel and site with most traffic and the respective count (i.e. number of Requests ) in your lab pod on this page. Navigate to Reporting > Additional Request > Total Request to view Traffic by type ( Firewall , DNS , Web , All) and Responses ( Allowed , Blocked ). You can check for Allowed or Blocked by Traffic type can be viewed on this page by clicking under the Responses Navigate to Reporting > Additional Request > Top Categories to view the traffic by various categories such as Advertisements, Search Engines etc. Note traffic size and number of requests by various categories is shown in these reports. Conclusion: Task 9's completion marks a significant milestone in leveraging Cisco Umbrella's robust monitoring capabilities. Throughout this task, we have successfully navigated the intricacies of Umbrella's reporting features, gaining insights into various aspects of network traffic and policy enforcement. Key takeaways from this task include: Effective Monitoring: The ability to monitor web and IP traffic from SD-WAN sites, providing visibility into network activities and policy impacts. Policy Enforcement Validation: Confirmation of the effectiveness of Umbrella policies, as seen in the blocking or allowing of specific web and IP traffic. Advanced Reporting: Utilization of Umbrella's advanced reporting features, such as Activity Search and Top Destinations, to filter and analyze network traffic data. Strategic Insights: Gathering strategic insights from the data, enabling informed decision-making for future network and security enhancements. As we conclude this task, it's evident that the integration of Umbrella into the network infrastructure offers not just enhanced security but also invaluable data for continuous network optimization and threat mitigation. This task underscores the critical role of active monitoring and reporting in maintaining a secure and efficient network.","title":"Task 9 Monitoring on Umbrella"},{"location":"Task9-v1/#task-9-monitoring-on-umbrella","text":"Task 9 is focused on utilizing Cisco Umbrella reports for monitoring usage, traffic detection, policy enforcement, and SD-WAN integration. This task assumes the completion of all prior tasks involving the integration of SD-WAN sites with Umbrella and the configuration of various policies.","title":"Task 9 - Monitoring on Umbrella"},{"location":"Task9-v1/#step-1-traffic-from-sd-wan-sites","text":"Objective: Initiate additional IP and Web traffic for Umbrella monitoring. 1. Generating Web and IP Traffic: On the RDP session, use mRemoteNG application to logon the console of VM named Site300-Ubuntu-VPN10 . Launch Chromium web browser and visit the website cisco.com . This website should be accessible. On the Chromium web browser navigate to facebook.com . As per earlier configured policy, the traffic to facebook.com should be blocked by Umbrella on Site-300. On the mRemoteNG application launch the Terminal application in the RDP session of the Site300-Ubuntu-VPN10 . Then initiate ICMP traffic by issuing below ping command. After few seconds stop the ping by pressing Ctrl-C . A 100% success rate in the ping results confirms successful Internet connectivity through Umbrella. ping 1.1.1.1 In the same terminal of the Site300-VPN10 host, execute the command below. After a few seconds, halt the ping by pressing Control-C . According to the previous configuration, Umbrella should block this traffic: ping 8.8.8.8 Next, * On the RDP session, use mRemoteNG application to logon the console of VM named Site400-Ubuntu-VPN10 . From the Chromium Web browser initiate traffic to www.cnn.com and cisco.com . As per earlier task, the traffic to www.cnn.com should be blocked by Umbrella. On the mRemoteNG application launch the Terminal application in the RDP session of the Site400-Ubuntu-VPN10 . Then initiate ICMP traffic by issuing below ping command. After few seconds stop the ping by pressing Ctrl-C . A 100% success rate in the ping results confirms successful Internet connectivity through Umbrella. ping 1.1.1.1","title":"Step 1: Traffic from SD-WAN sites"},{"location":"Task9-v1/#step-2-activity-reports-for-web-urls","text":"Objective: View web and IP traffic activity reports from SD-WAN branch sites in Umbrella. 1. Accessing Activity Search: On the RDP session (jumphost), access the Umbrella web page by clicking on Umbrella SSO bookmark on Google Chrome browser. Go to Reporting > Core Reports and click on Activity Search : Here you can view the result of every DNS, URL, and IP request from your various SD-WAN sites and other identities. Browse through to view some of the past results. 2. Conducting Advanced Searches: Click on blue Filters button to close the filter tab and then click on Advanced button in the Search field/bar. On the Advanced Search page, navigate to to the URL section and enter cnn.com . Then click Apply as shown in below screenshot: You will now see all the search results matching URL of cnn.com . Below is an example screenshot for these results (your view may be different): As per these search results: Note that the search results shows all Web Requests related to cnn.com i.e., Secure Web Gateway (or Web Proxy) of Umbrella logged these requests. Use the Scroll bar at the bottom to move right and review the various fields such as Action , Categories and Ruleset or Rule fields of the results (each row) shown on this page. Further on the right side of each row, click on the three dots ( ... ) and then click View Full Details to see detailed info as shown in below screenshot: In summary the info in Activty search results matches the configurations performed in earlier tasks! Click on Advanced button in the Search field again. On the Advanced Search page, enter facebook.com as the second URL and click Apply button as shown below: View the updated Activity results. Below screenshot is an example for such result and your data may vary: In the search result, review the various fields such as Action , Categories and Ruleset or Rule fields of the results (each row) shown on this page and verify that results match the configurations performed in earlier tasks.","title":"Step 2 - Activity Reports for Web URLs"},{"location":"Task9-v1/#step-3-activity-reports-for-firewall","text":"Objective: Review Umbrella's monitoring results for Firewall traffic. 1. Reviewing Traffic to Specific IPs: In the Umbrella Dashboard on Google Chrome, clear the existing Advanced Filter by clicking on CLEAR button or click on cross ( X ) next to the URL field on this page. Thus Web filters for cnn.com and facebook.com are cleared from Activity Search page. Alternatively, just navigate back to Reporting > Core Reports > Activity Search . Next, Click on Advanced button in the Search field/bar. On the Advanced Search page, navigate to the IP Address section, enter 1.1.1.1 and hit Apply : Now you can review the search results for all traffic related to IP address of 1.1.1.1 that is detected by Umbrella Firewall (FW). Below is an example of this search result - your result may vary: Next, Clear these search results and remove the filter for 1.1.1.1 . Create a new Advanced Search filter for IP Address of 8.8.8.8 (using the same procedure as above). Revew the search results IP address of 8.8.8.8 . Below is an example of screenshot for this search (note your result may be different). As per Actions field, you will see both Allowed and Blocked . Why do you see both of these actions? Tip: Have a look at details of these packets by clicking on view Full Details and then review the Protocol field (ICMP, UDP)!","title":"Step 3 - Activity Reports for Firewall"},{"location":"Task9-v1/#step-4-top-destinations-reports","text":"Objective: Analyze the most active destinations in traffic on the Umbrella Dashboard. 1. Viewing Top Destinations: On Umbrella Dashboard, navgiate to Reporting > Additional Reports > Top Destinations . It will show the most visited destinations. In previous tasks, on Ubuntu Virtual Machines at the SD-WAN sites, you had browsed to various websites. As Ubuntu VM settings the DNS queries will be routed via DNS Resolver with IP address of 1.1.1.1 . Below Figure shows an example screenshot from a lab system. Note: Your screen may not have the same output. Click on 1.1.1.1 among the list of destinations as shown below: 2. Investigating Specific Destinations: Once 1.1.1.1 is clicked it will show below screenshot. Click on VIEW 1.1.1.1 IN INVESTIGATE to view more details of this IP address as shown below The investigate page shows more details about this IP address as shown in below screenshot. Click on Talos to view the reputation and other intelligence from Cisco Talos about this IP address. Here is the screenshot from Cisco Talos about this IP address","title":"Step 4 - Top Destinations Reports"},{"location":"Task9-v1/#optional-step-5-additional-reports","text":"Objective: Explore various other reports available on the Umbrella Dashboard. Navigate to Reporting > Additional Request > Top Identities to view the traffic by various Identities. As expected, the Network tunnels (four) will be shown here. Allowed or Blocked Responses by specific Traffic type can also be viewed on this page by clicking under the Responses . You can vew the Tunnel and site with most traffic and the respective count (i.e. number of Requests ) in your lab pod on this page. Navigate to Reporting > Additional Request > Total Request to view Traffic by type ( Firewall , DNS , Web , All) and Responses ( Allowed , Blocked ). You can check for Allowed or Blocked by Traffic type can be viewed on this page by clicking under the Responses Navigate to Reporting > Additional Request > Top Categories to view the traffic by various categories such as Advertisements, Search Engines etc. Note traffic size and number of requests by various categories is shown in these reports. Conclusion: Task 9's completion marks a significant milestone in leveraging Cisco Umbrella's robust monitoring capabilities. Throughout this task, we have successfully navigated the intricacies of Umbrella's reporting features, gaining insights into various aspects of network traffic and policy enforcement. Key takeaways from this task include: Effective Monitoring: The ability to monitor web and IP traffic from SD-WAN sites, providing visibility into network activities and policy impacts. Policy Enforcement Validation: Confirmation of the effectiveness of Umbrella policies, as seen in the blocking or allowing of specific web and IP traffic. Advanced Reporting: Utilization of Umbrella's advanced reporting features, such as Activity Search and Top Destinations, to filter and analyze network traffic data. Strategic Insights: Gathering strategic insights from the data, enabling informed decision-making for future network and security enhancements. As we conclude this task, it's evident that the integration of Umbrella into the network infrastructure offers not just enhanced security but also invaluable data for continuous network optimization and threat mitigation. This task underscores the critical role of active monitoring and reporting in maintaining a secure and efficient network.","title":"Optional Step 5 - additional reports"},{"location":"Topology/","text":"Topology","title":"Topology"},{"location":"Topology/#topology","text":"","title":"Topology"}]}